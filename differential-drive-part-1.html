<!doctype html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta id="viewport" name="viewport" content="width=500" />
    <!--RSS FEEDS-->

    <title>Differential Drive Dynamics - Part 1 // Marginally Stable</title>
    <link rel="stylesheet" href="/theme/css/normalize.css" type="text/css" />
    <link rel="stylesheet" href="/theme/css/base.css" type="text/css" />
    <link rel="stylesheet" href="/theme/css/code.css" type="text/css" />
<link rel="stylesheet" href="/theme/css/article.css" type="text/css" />
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
            TeX: { equationNumbers: { autoNumber: "all" } }
        });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
    <!--Top image-->
    <div class="container">
        <div class="topimage">
            <img src="/theme/images/logo.png">
        </div>
    </div>

    <!--Links and site title-->
    <div class="topbar">
        <span><a href="/">Marginally Stable</a></span>
        <ul>
                <li><a href="/blog.html">Blog</a></li>
                <li><a href="/pages/about.html">About</a></li>
                <li><a href="https://github.com/jcrist/AIOs">AIOS</a></li>
        </ul>
    </div>
    <!--Content, footer, and scripts-->
    <div class="container">
    <div class="page-title">
        <h1>Differential Drive Dynamics - Part 1</h1>
        <p>Sun 16 March 2014 &mdash; under
            <a class="post-category" href="/tag/sympy.html">sympy</a>,
            <a class="post-category" href="/tag/pydy.html">pydy</a>,
            <a class="post-category" href="/tag/dynamics.html">dynamics</a>,
            <a class="post-category" href="/tag/example.html">example</a>
        </p>
    </div>
    <p>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Differential-Drive-Robotics-Platform">Differential Drive Robotics Platform<a class="anchor-link" href="#Differential-Drive-Robotics-Platform">&#182;</a></h1><p>I've been using <a href="http://sympy.org">SymPy</a> in my research and coursework for a while now. For those that don't know, SymPy is a computer algebra system, capable of performing symbolic calculations that would be too complicated to do by hand. Which makes it perfect for solving the equations needed to generate the equations of motion (EOM) of multibody systems! In this post, I'll demonstrate a simple workflow for generating the EOM for a differential drive robot.</p>
<h2 id="Problem-Setup">Problem Setup<a class="anchor-link" href="#Problem-Setup">&#182;</a></h2><p>A common robot platform is that of the <a href="http://en.wikipedia.org/wiki/Differential_wheeled_robot">differential drive</a>. The robot is propelled using two wheels, each with their own motor. Usually a caster is used as a third wheel to provide stability. By varying the speeds of the two motors, the robot can change direction.</p>
<p>Differential drive platforms are highly maneuverable, as they have a very small turn radius. They are also extremely simple to design. In this example, the dynamics of a differential drive platform will be explored. The resulting model is highly accurate, but makes a few assumptions:</p>
<p><strong>Assumptions</strong></p>
<ul>
<li>Wheels roll without slipping</li>
<li>Body is symmetric</li>
</ul>
<p><strong>The setup is as follows:</strong></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="k">import</span> <span class="n">SVG</span>
<span class="n">SVG</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;Robot.svg&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt output_prompt">Out[1]:</div>

<div class="output_svg output_subarea output_execute_result">
<svg height="334.84042" id="svg2985" inkscape:version="0.48.3.1 r9886" sodipodi:docname="Robot.svg" version="1.1" width="830.74847" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview bordercolor="#666666" borderopacity="1.0" fit-margin-bottom="4" fit-margin-left="4" fit-margin-right="4" fit-margin-top="4" id="namedview2989" inkscape:current-layer="layer1" inkscape:cx="238.25443" inkscape:cy="391.65337" inkscape:document-units="mm" inkscape:pageopacity="0.0" inkscape:pageshadow="2" inkscape:window-height="699" inkscape:window-maximized="1" inkscape:window-width="1366" inkscape:window-x="0" inkscape:window-y="22" inkscape:zoom="0.8683167" pagecolor="#ffffff" showgrid="false" units="mm"/>
  <defs id="defs2987">
    <marker id="Arrow1Mend" inkscape:stockid="Arrow1Mend" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 0,0 5,-5 -12.5,0 5,5 0,0 z" id="path6861" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt" transform="matrix(-0.4,0,0,-0.4,-4,0)"/>
    </marker>
    <marker id="Arrow1Lend" inkscape:stockid="Arrow1Lend" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 0,0 5,-5 -12.5,0 5,5 0,0 z" id="path3947" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt" transform="matrix(-0.8,0,0,-0.8,-10,0)"/>
    </marker>
    <marker id="Arrow1Mstart" inkscape:stockid="Arrow1Mstart" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 0,0 5,-5 -12.5,0 5,5 0,0 z" id="path3950" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt" transform="matrix(0.4,0,0,0.4,4,0)"/>
    </marker>
    <marker id="Arrow2Mstart" inkscape:stockid="Arrow2Mstart" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z" id="path3968" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round" transform="scale(0.6,0.6)"/>
    </marker>
    <marker id="Arrow2Lend" inkscape:stockid="Arrow2Lend" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z" id="path3965" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round" transform="matrix(-1.1,0,0,-1.1,-1.1,0)"/>
    </marker>
    <marker id="Arrow2Lstart" inkscape:stockid="Arrow2Lstart" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z" id="path3962" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round" transform="matrix(1.1,0,0,1.1,1.1,0)"/>
    </marker>
    <marker id="Arrow1Lstart" inkscape:stockid="Arrow1Lstart" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 0,0 5,-5 -12.5,0 5,5 0,0 z" id="path3944" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt" transform="matrix(0.8,0,0,0.8,10,0)"/>
    </marker>
    <marker id="Arrow2Lstart-9" inkscape:stockid="Arrow2Lstart" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z" id="path3962-7" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round" transform="matrix(1.1,0,0,1.1,1.1,0)"/>
    </marker>
    <marker id="Arrow2Lstart-93" inkscape:stockid="Arrow2Lstart" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z" id="path3962-1" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round" transform="matrix(1.1,0,0,1.1,1.1,0)"/>
    </marker>
    <marker id="Arrow1Lend3" inkscape:stockid="Arrow1Lend3" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 0,0 5,-5 -12.5,0 5,5 0,0 z" id="path6018" inkscape:connector-curvature="0" style="fill:#008000;fill-rule:evenodd;stroke:#008000;stroke-width:1pt" transform="matrix(-0.8,0,0,-0.8,-10,0)"/>
    </marker>
    <marker id="Arrow2Lstart-0" inkscape:stockid="Arrow2Lstart" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z" id="path3962-2" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round" transform="matrix(1.1,0,0,1.1,1.1,0)"/>
    </marker>
    <marker id="marker3091" inkscape:stockid="Arrow2Lstart" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z" id="path3093" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round" transform="matrix(1.1,0,0,1.1,1.1,0)"/>
    </marker>
    <marker id="Arrow1Mstart-0" inkscape:stockid="Arrow1Mstart" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 0,0 5,-5 -12.5,0 5,5 0,0 z" id="path3950-4" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke:#000000;stroke-width:1pt" transform="matrix(0.4,0,0,0.4,4,0)"/>
    </marker>
    <marker id="Arrow1Lend3-5" inkscape:stockid="Arrow1Lend3" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 0,0 5,-5 -12.5,0 5,5 0,0 z" id="path6018-5" inkscape:connector-curvature="0" style="fill:#008000;fill-rule:evenodd;stroke:#008000;stroke-width:1pt" transform="matrix(-0.8,0,0,-0.8,-10,0)"/>
    </marker>
    <marker id="Arrow1Lend3-2" inkscape:stockid="Arrow1Lend3" orient="auto" refX="0" refY="0" style="overflow:visible">
      <path d="M 0,0 5,-5 -12.5,0 5,5 0,0 z" id="path6018-0" inkscape:connector-curvature="0" style="fill:#008000;fill-rule:evenodd;stroke:#008000;stroke-width:1pt" transform="matrix(-0.8,0,0,-0.8,-10,0)"/>
    </marker>
  </defs>
  <metadata id="metadata2991">
    <rdf:RDF>
      <cc:Work rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
        <dc:title/>
      </cc:Work>
    </rdf:RDF>
  </metadata>
  <g id="layer1" inkscape:groupmode="layer" inkscape:label="Layer 1" transform="translate(-105.83124,-208.02101)">
    <text id="text4633" sodipodi:linespacing="125%" style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans" x="228.83009" xml:space="preserve" y="469.66122"><tspan id="tspan4635" sodipodi:role="line" x="228.83009" y="469.66122"/></text>
    <path d="m 446.06042,264.54267 c -1.53626,16.15593 -3.07252,32.31185 -4.60877,48.46778 -13.22332,-22.90345 -26.44663,-45.80691 -39.66994,-68.71035 14.75957,6.74754 29.51914,13.49504 44.27871,20.24257 z m -134.07579,31.38245 c 29.90069,-17.26318 59.80139,-34.52636 89.7021,-51.78953 13.28662,23.01312 26.57327,46.02626 39.8599,69.03938 -29.90071,17.26318 -59.80141,34.52635 -89.7021,51.78953 -13.28663,-23.01313 -26.57327,-46.02626 -39.8599,-69.03938 z" id="path3002" inkscape:connector-curvature="0" style="fill:#007fff;fill-opacity:1;fill-rule:evenodd;stroke:none"/>
    <path d="M 327.61989,332.77901 C 446.35082,264.22967 446.62282,264.07263 446.62282,264.07263" id="path3799-8" inkscape:connector-curvature="0" style="fill:none;stroke:#000000;stroke-width:0.53514546;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:6.42174526, 0.53514543;stroke-dashoffset:0"/>
    <rect height="18.038532" id="rect3779" style="fill:#aa4400;stroke:none" transform="matrix(0.8660254,-0.50000001,0.50000001,0.8660254,0,0)" width="36.077057" x="131.77338" y="391.53778"/>
    <g id="g6939">
      <path d="m 340.59375,329.71875 0.96875,1 6.09375,-5.9375 -1,-1.03125 z m -12.15625,11.90625 1,1 6.0625,-5.9375 -1,-1.03125 z m -12.15625,11.90625 1,1 6.0625,-5.9375 -1,-1.03125 z m -12.15625,11.875 1,1.03125 6.0625,-5.96875 -0.96875,-1 z m -12.15625,11.90625 1,1.03125 6.09375,-5.96875 -1,-1 z m -12.125,11.90625 0.96875,1.03125 6.09375,-5.96875 -1,-1 z m -12.15625,11.90625 1,1 6.0625,-5.9375 -1,-1 z m -12.15625,11.90625 1,1 6.0625,-5.9375 -0.96875,-1.03125 z m -12.15625,11.90625 1,1 6.0625,-5.9375 -0.96875,-1.03125 z m -12.125,11.90625 0.96875,1 6.09375,-5.9375 -1,-1.03125 z m -12.15625,11.90625 1,1 6.0625,-5.96875 -1,-1 z m -12.15625,11.875 1,1.03125 6.0625,-5.96875 -1,-1 z m -12.15625,11.90625 1,1.03125 6.0625,-5.96875 -0.96875,-1 z m -12.15625,11.90625 1,1.03125 6.09375,-5.96875 -1,-1 z m -12.125,11.90625 0.96875,1 6.09375,-5.9375 -1,-1 z m -12.15625,11.90625 1,1 6.0625,-5.9375 -1,-1.03125 z m -12.15625,11.90625 1,1 6.0625,-5.9375 -0.96875,-1.03125 z" id="path5605" inkscape:connector-curvature="0" style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000000;fill:#008000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.41732287;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Sans;-inkscape-font-specification:Sans"/>
      <path d="m 342.47834,328.84696 -0.0824,8.01717 10.20686,-17.93562 -18.14163,9.83605 8.01717,0.0824 z" id="path6945" inkscape:connector-curvature="0" style="fill:#008000;fill-rule:evenodd;stroke:#008000;stroke-width:1.1338583pt"/>
    </g>
    <g id="g4062" transform="matrix(0.73501461,0,0,0.73501461,14.413444,63.510397)">
      <g id="g4605-5" style="stroke-width:1.65409982;stroke-miterlimit:4;stroke-dasharray:none" transform="matrix(0.37102887,-0.21421362,0.21421362,0.37102887,311.71247,156.20929)">
        <path d="m 87.948938,470.91859 c 0,87.1346 0,87.1346 0,87.1346" id="path3938-2" inkscape:connector-curvature="0" style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:1.65409982;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:url(#Arrow2Lstart)"/>
        <path d="m 175.63762,557.79673 c -87.1346,0 -87.1346,0 -87.1346,0" id="path3938-4-6" inkscape:connector-curvature="0" style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:1.65409982;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:url(#Arrow2Lstart)"/>
      </g>
      <text id="text4609-9" sodipodi:linespacing="125%" style="font-size:20px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans;-inkscape-font-specification:Sans" transform="matrix(0.8660254,-0.5,0.5,0.8660254,0,0)" x="233.69742" xml:space="preserve" y="495.58575"><tspan id="tspan4611-4" sodipodi:role="line" x="233.69742" y="495.58575">R<tspan id="tspan3171" style="font-size:13.00018311px;baseline-shift:sub">y</tspan></tspan></text>
      <text id="text4615-1" sodipodi:linespacing="125%" style="font-size:20px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans;-inkscape-font-specification:Sans" transform="matrix(0.8660254,-0.5,0.5,0.8660254,0,0)" x="259.37842" xml:space="preserve" y="520.45239"><tspan id="tspan4627-0" sodipodi:role="line" x="259.37842" y="520.45239">R<tspan id="tspan3173" style="font-size:13.00018311px;baseline-shift:sub">x</tspan></tspan></text>
      <text id="text4621-5" sodipodi:linespacing="125%" style="font-size:20px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans;-inkscape-font-specification:Sans" transform="matrix(0.8660254,-0.5,0.5,0.8660254,0,0)" x="196.67409" xml:space="preserve" y="521.10706"><tspan id="tspan4623-6" sodipodi:role="line" x="196.67409" y="521.10706">R<tspan id="tspan3169" style="font-size:13.00018311px;baseline-shift:sub">z</tspan></tspan></text>
      <path d="m 78.934423,431.0819 c -11.914018,-3.71487 -18.26549,-15.52225 -14.186409,-26.37252 4.079081,-10.85026 17.044048,-16.63464 28.958066,-12.91976 6.85231,2.1366 12.18247,7.11093 14.36042,13.40177" id="path4641-3" sodipodi:cx="86.320251" sodipodi:cy="411.43576" sodipodi:end="5.9777527" sodipodi:open="true" sodipodi:rx="22.801577" sodipodi:ry="20.76572" sodipodi:start="1.9006636" sodipodi:type="arc" style="fill:none;stroke:#000000;stroke-width:2.51632953;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:url(#Arrow1Mstart);marker-end:none" transform="matrix(0.48778887,-0.28162504,0.28162504,0.48778887,306.0273,164.72779)"/>
    </g>
    <rect height="18.038532" id="rect3779-0" style="fill:#aa4400;stroke:none" transform="matrix(0.8660254,-0.50000001,0.50000001,0.8660254,0,0)" width="36.077057" x="130.3158" y="494.18896"/>
    <path d="m 320.55777,257.3898 c 68.54934,118.73093 68.70638,119.00293 68.70638,119.00293" id="path3799" inkscape:connector-curvature="0" style="fill:none;stroke:#000000;stroke-width:1.04175305;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:6.25051811, 1.04175302;stroke-dashoffset:0"/>
    <path d="m 340.18453,384.98209 c 57.43196,-33.15834 57.56353,-33.23431 57.56353,-33.23431" id="path3799-8-8-6" inkscape:connector-curvature="0" style="fill:none;stroke:#000000;stroke-width:1.04175305;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:6.25051811, 1.04175302;stroke-dashoffset:0"/>
    <path d="m 289.75863,295.42888 c 57.43195,-33.15834 57.56353,-33.23431 57.56353,-33.23431" id="path3799-8-8" inkscape:connector-curvature="0" style="fill:none;stroke:#000000;stroke-width:1.04175305;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:6.25051811, 1.04175302;stroke-dashoffset:0"/>
    <g id="g3064" style="stroke-width:1.92829204;stroke-miterlimit:4;stroke-dasharray:none" transform="matrix(0.73501461,0,0,0.73501461,14.413444,63.510397)">
      <g id="g4605" style="stroke-width:1.92829204;stroke-miterlimit:4;stroke-dasharray:none" transform="translate(91.206306,65.147361)">
        <path d="m 87.948938,470.91859 c 0,87.1346 0,87.1346 0,87.1346" id="path3938" inkscape:connector-curvature="0" style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:1.92829204;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:url(#Arrow2Lstart)"/>
        <path d="m 175.63762,557.79673 c -87.1346,0 -87.1346,0 -87.1346,0" id="path3938-4" inkscape:connector-curvature="0" style="fill:#000000;fill-opacity:1;stroke:#000000;stroke-width:1.92829204;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:url(#Arrow2Lstart)"/>
      </g>
      <text id="text4609" sodipodi:linespacing="125%" style="font-size:20px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans;-inkscape-font-specification:Sans" x="171.82617" xml:space="preserve" y="526.66516"><tspan id="tspan4611" sodipodi:role="line" x="171.82617" y="526.66516">N<tspan id="tspan4631" style="font-size:65.00091553%;baseline-shift:sub">y</tspan></tspan></text>
      <text id="text4615" sodipodi:linespacing="125%" style="font-size:20px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans;-inkscape-font-specification:Sans" x="254.07471" xml:space="preserve" y="610.54236"><tspan id="tspan4627" sodipodi:role="line" x="254.07471" y="610.54236">N<tspan id="tspan4629" style="font-size:65.00091553%;baseline-shift:sub">x</tspan></tspan></text>
      <text id="text4621" sodipodi:linespacing="125%" style="font-size:20px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans;-inkscape-font-specification:Sans" x="141.69551" xml:space="preserve" y="626.01489"><tspan id="tspan4623" sodipodi:role="line" x="141.69551" y="626.01489">N<tspan id="tspan4637" style="font-size:65.00091553%;baseline-shift:sub">z</tspan></tspan></text>
      <path d="m 78.934423,431.0819 c -11.914018,-3.71487 -18.26549,-15.52225 -14.186409,-26.37252 4.079081,-10.85026 17.044048,-16.63464 28.958066,-12.91976 6.85231,2.1366 12.18247,7.11093 14.36042,13.40177" id="path4641" sodipodi:cx="86.320251" sodipodi:cy="411.43576" sodipodi:end="5.9777527" sodipodi:open="true" sodipodi:rx="22.801577" sodipodi:ry="20.76572" sodipodi:start="1.9006636" sodipodi:type="arc" style="fill:none;stroke:#000000;stroke-width:3.4235096;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;marker-start:url(#Arrow1Mstart);marker-end:none" transform="matrix(0.56325007,0,0,0.56325007,131.75665,389.01942)"/>
    </g>
    <g id="g6947">
      <path d="m 542.625,316.53125 1.53125,0 -0.0312,-1.40625 -1.53125,0 z m -17.03125,-1.28125 0,1.40625 8.53125,-0.0625 -0.0312,-1.40625 z m -17,0.125 0,1.40625 8.5,-0.0625 0,-1.40625 z m -17,0.125 0,1.40625 8.5,-0.0625 0,-1.40625 z m -17.03125,0.0937 0.0312,1.4375 8.5,-0.0625 0,-1.40625 z m -17,0.125 0.0312,1.4375 8.5,-0.0625 -0.0312,-1.4375 z m -17,0.125 0,1.40625 8.5,-0.0312 0,-1.4375 z m -17,0.125 0,1.40625 8.5,-0.0625 0,-1.40625 z m -17.03125,0.125 0.0312,1.40625 8.5,-0.0625 0,-1.40625 z m -17,0.125 0.0312,1.40625 8.5,-0.0625 -0.0312,-1.40625 z m -17,0.0937 0,1.4375 8.5,-0.0625 0,-1.4375 z m -17,0.125 0,1.4375 8.5,-0.0625 0,-1.4375 z" id="path5605-4" inkscape:connector-curvature="0" style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000000;fill:#008000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.41732287;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Sans;-inkscape-font-specification:Sans"/>
      <path d="m 529.96816,315.92575 -5.62925,5.70906 19.80213,-5.80881 -19.88193,-5.52949 5.70905,5.62924 z" id="path6953" inkscape:connector-curvature="0" style="fill:#008000;fill-rule:evenodd;stroke:#008000;stroke-width:1.1338583pt"/>
    </g>
    <g id="g6955">
      <path d="m 514.21875,223.0625 0.71875,1.21875 1.3125,-0.78125 -0.71875,-1.21875 z m -14.6875,8.625 0.71875,1.21875 7.34375,-4.3125 -0.71875,-1.21875 z m -14.65625,8.59375 0.71875,1.21875 7.34375,-4.3125 -0.71875,-1.21875 z m -14.65625,8.59375 0.6875,1.25 7.34375,-4.3125 -0.71875,-1.21875 z m -14.6875,8.625 0.71875,1.21875 7.34375,-4.3125 -0.71875,-1.21875 z m -14.65625,8.59375 0.71875,1.21875 7.3125,-4.28125 -0.71875,-1.21875 z m -14.6875,8.625 0.71875,1.21875 7.34375,-4.3125 -0.71875,-1.21875 z M 411.53125,283.3125 412.25,284.53125 419.59375,280.25 418.875,279 z m -14.6875,8.625 0.71875,1.21875 7.34375,-4.3125 -0.71875,-1.21875 z m -14.65625,8.59375 0.71875,1.21875 7.34375,-4.3125 -0.71875,-1.21875 z m -14.65625,8.59375 0.71875,1.25 7.3125,-4.3125 -0.71875,-1.21875 z m -14.6875,8.625 0.71875,1.21875 7.34375,-4.3125 -0.71875,-1.21875 z" id="path5605-4-2" inkscape:connector-curvature="0" style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000000;fill:#008000;fill-opacity:1;fill-rule:nonzero;stroke:none;stroke-width:1.41732287;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Sans;-inkscape-font-specification:Sans"/>
      <path d="m 503.66462,230.07572 -2.02055,7.75881 14.24474,-14.93164 -19.983,5.15228 7.75881,2.02055 z" id="path6961" inkscape:connector-curvature="0" style="fill:#008000;fill-rule:evenodd;stroke:#008000;stroke-width:1.1338583pt"/>
    </g>
    <text id="text4138" sodipodi:linespacing="125%" style="font-size:20px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans;-inkscape-font-specification:Sans" x="496.06177" xml:space="preserve" y="284.53506"><tspan id="tspan4142" sodipodi:role="line" x="496.06177" y="284.53506">θ</tspan></text>
    <path d="m 268.12559,317.98268 a 87.525665,87.525665 0 0 1 11.72622,43.76283" id="path4162" sodipodi:cx="192.32614" sodipodi:cy="361.74551" sodipodi:end="6.2831853" sodipodi:open="true" sodipodi:rx="87.525665" sodipodi:ry="87.525665" sodipodi:start="5.7595865" sodipodi:type="arc" style="fill:none;stroke:#000000;stroke-width:0.7455861;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;marker-start:url(#marker3091);marker-end:url(#Arrow2Lend)" transform="matrix(1.3972269,0,0,1.3972269,102.15609,-193.71812)"/>
    <g id="g6973">
      <path d="m 294.9375,296.4375 -0.90625,0.53125 47.5625,82.375 0.90625,-0.53125 -47.5625,-82.375 z" id="path3799-6" inkscape:connector-curvature="0" style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000000;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.0629921;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Sans;-inkscape-font-specification:Sans"/>
      <path d="m 296.08321,308.8962 -2.31927,-13.41288 10.45625,8.71499 c -3.42253,-0.38074 -6.70305,1.52685 -8.13698,4.69789 z" id="path6979" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"/>
      <path d="m 340.45634,366.8871 2.31977,13.4128 -10.45658,-8.71462 c 3.42255,0.38062 6.703,-1.52709 8.13681,-4.69818 z" id="path6981" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke-width:0.625;stroke-linejoin:round"/>
    </g>
    <text id="text5846" sodipodi:linespacing="125%" style="font-size:20px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans;-inkscape-font-specification:Sans" transform="matrix(0.8660254,-0.50000001,0.50000001,0.8660254,0,0)" x="74.986252" xml:space="preserve" y="439.57254"><tspan id="tspan5848" sodipodi:role="line" style="font-size:20px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;writing-mode:lr-tb;text-anchor:start;font-family:Sans;-inkscape-font-specification:Sans" x="74.986252" y="439.57254">2w</tspan></text>
    <rect height="82.919052" id="rect5896" style="fill:#007fff;fill-opacity:1;stroke:#000000;stroke-width:1.0629921;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" width="188.87119" x="624.88025" y="389.38519"/>
    <rect height="82.919052" id="rect5896-2" style="fill:#007fff;fill-opacity:1;stroke:#000000;stroke-width:1.0629921;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" width="67.244766" x="814.6001" y="389.38519"/>
    <path d="m 604.61811,505.12637 a 50.096928,50.096928 0 1 1 -100.19386,0 50.096928,50.096928 0 1 1 100.19386,0 z" id="path5962" sodipodi:cx="554.52118" sodipodi:cy="505.12637" sodipodi:rx="50.096928" sodipodi:ry="50.096928" sodipodi:type="arc" style="fill:#aa4400;fill-opacity:1;stroke:#000000;stroke-width:1.0629921;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" transform="translate(137.42757,-34.549606)"/>
    <path d="m 604.61811,505.12637 a 50.096928,50.096928 0 1 1 -100.19386,0 50.096928,50.096928 0 1 1 100.19386,0 z" id="path5962-8" sodipodi:cx="554.52118" sodipodi:cy="505.12637" sodipodi:rx="50.096928" sodipodi:ry="50.096928" sodipodi:type="arc" style="fill:#aa4400;fill-opacity:1;stroke:#000000;stroke-width:1.0629921;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0" transform="matrix(0.46544142,0,0,0.46544142,592.90296,260.8064)"/>
    <path d="m 587.62548,520.67368 c 334.17283,0 334.17283,0 334.17283,0" id="path5984" inkscape:connector-curvature="0" style="fill:none;stroke:#000000;stroke-width:1.21631289;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none"/>
    <text id="text5986" sodipodi:linespacing="125%" style="font-size:20px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;letter-spacing:0px;word-spacing:0px;writing-mode:lr-tb;text-anchor:start;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans;-inkscape-font-specification:Sans" x="245.60551" xml:space="preserve" y="444.42282"><tspan id="tspan5988" sodipodi:role="line" style="font-size:20px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;writing-mode:lr-tb;text-anchor:start;font-family:Sans;-inkscape-font-specification:Sans" x="245.60551" y="444.42282">d=[x y]<tspan id="tspan5990" style="font-size:20px;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-align:start;line-height:125%;writing-mode:lr-tb;text-anchor:start;baseline-shift:super;font-family:Sans;-inkscape-font-specification:Sans">T</tspan></tspan></text>
    <path d="m 331.67622,602.4411 a 10.364882,10.364882 0 1 1 -20.72976,0 10.364882,10.364882 0 1 1 20.72976,0 z" id="path5992" sodipodi:cx="321.31134" sodipodi:cy="602.4411" sodipodi:rx="10.364882" sodipodi:ry="10.364882" sodipodi:type="arc" style="fill:#000000;stroke:#000000;stroke-width:1.41732287;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0" transform="matrix(0.5839982,0,0,0.5839982,502.74027,119.87312)"/>
    <path d="m 581.39239,410.69079 a 58.734329,58.734329 0 0 1 101.73084,0" id="path6000" sodipodi:cx="632.25781" sodipodi:cy="440.05795" sodipodi:end="5.7595865" sodipodi:open="true" sodipodi:rx="58.734329" sodipodi:ry="58.734329" sodipodi:start="3.6651914" sodipodi:type="arc" style="fill:none;stroke:#000000;stroke-width:1.41732287;stroke-miterlimit:4;stroke-opacity:1;stroke-dasharray:none;stroke-dashoffset:0;marker-start:none;marker-end:url(#Arrow2Lend)" transform="translate(61.340945,20.729763)"/>
    <text id="text6418" sodipodi:linespacing="125%" style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans" x="672.44708" xml:space="preserve" y="453.27121"><tspan id="tspan6420" sodipodi:role="line" style="font-size:20px" x="672.44708" y="453.27121">r</tspan></text>
    <text id="text6422" sodipodi:linespacing="125%" style="font-size:40px;font-style:normal;font-weight:normal;line-height:125%;letter-spacing:0px;word-spacing:0px;fill:#000000;fill-opacity:1;stroke:none;font-family:Sans" x="749.72644" xml:space="preserve" y="417.02487"><tspan id="tspan6424" sodipodi:role="line" style="font-size:20px" x="749.72644" y="417.02487">ϕ<tspan id="tspan6428" style="font-size:65.00091553%;baseline-shift:sub">1</tspan></tspan></text>
    <g id="g6963">
      <path d="m 649.3125,447.09375 -0.65625,1.21875 45.46875,24.40625 0.65625,-1.1875 -45.46875,-24.4375 z" id="path6846" inkscape:connector-curvature="0" style="font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;font-stretch:normal;text-indent:0;text-align:start;text-decoration:none;line-height:normal;letter-spacing:normal;word-spacing:normal;text-transform:none;direction:ltr;block-progression:tb;writing-mode:lr-tb;text-anchor:start;baseline-shift:baseline;color:#000000;fill:#000000;fill-opacity:1;stroke:none;stroke-width:1.35797536;marker:none;visibility:visible;display:inline;overflow:visible;enable-background:accumulate;font-family:Sans;-inkscape-font-specification:Sans"/>
      <path d="m 689.6615,469.54468 -3.67768,1.1079 9.65965,2.10434 -7.08986,-6.88992 1.10789,3.67768 z" id="path6969" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke:#000000;stroke-width:0.54319015pt"/>
      <path d="m 653.77193,450.27248 3.67768,-1.1079 -9.65965,-2.10434 7.08986,6.88992 -1.10789,-3.67768 z" id="path6971" inkscape:connector-curvature="0" style="fill-rule:evenodd;stroke:#000000;stroke-width:0.54319015pt"/>
    </g>
  </g>
</svg>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Equations-of-Motion">Equations of Motion<a class="anchor-link" href="#Equations-of-Motion">&#182;</a></h2><p>We’ll start by generating the equations of motion for the robot with <code>sympy.physics.mechanics</code>. The <code>mechanics</code> module provides a clean, intuitive workflow for deriving the equations of motion for multibody dynamic systems using either <code>KanesMethod</code> or <code>LagrangesMethod</code> objects. In this example we'll make use of the <code>LagrangesMethod</code> object, which generates the equations of motion using <a href="http://en.wikipedia.org/wiki/Lagrangian_mechanics">Lagrangian Mechanics</a> with constraints and generalized forces.</p>
<p>First we import the necessary functionality from SymPy.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sympy.physics.mechanics</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="n">sin</span><span class="p">,</span> <span class="n">cos</span><span class="p">,</span> <span class="n">symbols</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">,</span> <span class="n">solve</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next we need to define an inertial reference frame, as well as a coordinate origin. All coordinates and reference frames defined later will be in reference to the world coordinate frame.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Inertial Reference Frame</span>
<span class="n">N</span> <span class="o">=</span> <span class="n">ReferenceFrame</span><span class="p">(</span><span class="s1">&#39;N&#39;</span><span class="p">)</span>

<span class="c1">#Define a world coordinate origin</span>
<span class="n">O</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="s1">&#39;O&#39;</span><span class="p">)</span>
<span class="n">O</span><span class="o">.</span><span class="n">set_vel</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Lagrange's Method requires a state vector $\vec{q}$ that contains all the generalized coordinates required to define the system in space. In the case of the robot:</p>
$$
\vec{q} = [\matrix{x && y && \theta && \phi_1 && \phi_2}]^T
$$<p>As these are all time varying variables, they need to be created as <code>dynamicsymbols</code>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">theta</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s1">&#39;theta&#39;</span><span class="p">)</span>                      <span class="c1">#Rotation about N.z</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s1">&#39;x, y&#39;</span><span class="p">)</span>                        <span class="c1">#Coordinates of robot in World Frame</span>
<span class="n">phi1</span><span class="p">,</span> <span class="n">phi2</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s1">&#39;phi_1, phi_2&#39;</span><span class="p">)</span>          <span class="c1">#Angular displacement of wheel</span>

<span class="c1">#Create q and dq vectors</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">phi1</span><span class="p">,</span> <span class="n">phi2</span><span class="p">])</span>
<span class="n">dq</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We'll also define some constant parameters that define the specific robot:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Constants for the wheels</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>                                     <span class="c1">#Radius of wheel</span>
<span class="n">m_w</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;m_w&#39;</span><span class="p">)</span>                                 <span class="c1">#Mass of the wheel</span>
<span class="n">t_w</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;t_w&#39;</span><span class="p">)</span>                                 <span class="c1">#Thickness of the wheel</span>

<span class="c1">#Constants for the Robot Body</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>                                     <span class="c1">#2*w is the width of the wheel base</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>                                     <span class="c1">#Distance between axel and center of mass</span>
<span class="n">m_b</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;m_b&#39;</span><span class="p">)</span>                                 <span class="c1">#Mass of the body</span>
<span class="n">Ixx</span><span class="p">,</span> <span class="n">Iyy</span><span class="p">,</span> <span class="n">Izz</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;Ixx, Iyy, Izz&#39;</span><span class="p">)</span>             <span class="c1">#Moments of inertia of body</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next we need to define a reference frame relative to the robot, and a point located at the center of the wheel axis. This will define the robot's location in the world coordinate frame. The velocity of this point is just the derivative of its x and y coordinates.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Robot Reference Frame</span>
<span class="n">R</span> <span class="o">=</span> <span class="n">N</span><span class="o">.</span><span class="n">orientnew</span><span class="p">(</span><span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="s1">&#39;Axis&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">theta</span><span class="p">,</span> <span class="n">N</span><span class="o">.</span><span class="n">z</span><span class="p">])</span>

<span class="c1">#Center of wheel base</span>
<span class="n">Cw</span> <span class="o">=</span> <span class="n">O</span><span class="o">.</span><span class="n">locatenew</span><span class="p">(</span><span class="s1">&#39;Cw&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">*</span><span class="n">N</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">*</span><span class="n">N</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

<span class="c1">#Set the velocity of point Cw</span>
<span class="n">Cw</span><span class="o">.</span><span class="n">set_vel</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">x</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">*</span><span class="n">N</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span><span class="o">*</span><span class="n">N</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Coordinates of the 2 wheel hubs then need to be specified. Luckily sympy mechanics makes this easy to do with the <code>locatenew</code> method. The hubs 1 and 2 are located at $-w\vec{R_y}$ and $w\vec{R_y}$ away from the center of the wheel base $C_w$ respectively.</p>
<p>The velocity of the hubs is then found using the <code>v2pt_theory</code> method, which calculates the velocity of a point based off the velocity of another point in the same frame, and the angular velocity of that frame (<a href="http://en.wikipedia.org/wiki/Rotating_reference_frame#Relation_between_velocities_in_the_two_frames">reference</a>).</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Points at wheel hubs</span>
<span class="n">H1</span> <span class="o">=</span> <span class="n">Cw</span><span class="o">.</span><span class="n">locatenew</span><span class="p">(</span><span class="s1">&#39;H1&#39;</span><span class="p">,</span> <span class="o">-</span><span class="n">w</span><span class="o">*</span><span class="n">R</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
<span class="n">H2</span> <span class="o">=</span> <span class="n">Cw</span><span class="o">.</span><span class="n">locatenew</span><span class="p">(</span><span class="s1">&#39;H2&#39;</span><span class="p">,</span> <span class="n">w</span><span class="o">*</span><span class="n">R</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

<span class="c1">#Set the velocity of points H1 and H2</span>
<span class="n">H1</span><span class="o">.</span><span class="n">v2pt_theory</span><span class="p">(</span><span class="n">Cw</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">R</span><span class="p">)</span>
<span class="n">H2</span><span class="o">.</span><span class="n">v2pt_theory</span><span class="p">(</span><span class="n">Cw</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">R</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Rotating reference frames fixed to each wheel are then created. These rotate about the $\vec{R_y}$ axis with the angular position of the wheels, $\phi_1$ and $\phi_2$.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Create reference frames for wheels 1 and 2</span>
<span class="n">W1</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">orientnew</span><span class="p">(</span><span class="s1">&#39;W1&#39;</span><span class="p">,</span> <span class="s1">&#39;Axis&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">phi1</span><span class="p">,</span> <span class="n">R</span><span class="o">.</span><span class="n">y</span><span class="p">])</span>
<span class="n">W2</span> <span class="o">=</span> <span class="n">R</span><span class="o">.</span><span class="n">orientnew</span><span class="p">(</span><span class="s1">&#39;W2&#39;</span><span class="p">,</span> <span class="s1">&#39;Axis&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">phi2</span><span class="p">,</span> <span class="n">R</span><span class="o">.</span><span class="n">y</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><code>sympy.physics.mechanics</code> provides classes for rigid bodies. These make calculating the lagrangian of a multibody system easier, as each body can be handled separately. To do this, each body needs the following things specified:</p>
<ul>
<li>A name</li>
<li>A center of mass</li>
<li>A reference frame</li>
<li>A mass</li>
<li>A tuple of (Inertia, Point of rotation)</li>
</ul>
<p>Modeling the wheels as solid cylinders, the inertia can be calculated about the hubs, and <code>RigidBody</code> objects can be created for each wheel.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Calculate inertia of the wheel</span>
<span class="n">Iw</span> <span class="o">=</span> <span class="n">inertia</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">m_w</span><span class="o">*</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">t_w</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">12</span><span class="p">,</span> <span class="n">m_w</span><span class="o">*</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">m_w</span><span class="o">*</span><span class="p">(</span><span class="mi">3</span><span class="o">*</span><span class="n">r</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">t_w</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">12</span><span class="p">)</span>

<span class="c1">#Create rigid bodies for wheels</span>
<span class="n">Wheel1</span> <span class="o">=</span> <span class="n">RigidBody</span><span class="p">(</span><span class="s1">&#39;Wheel1&#39;</span><span class="p">,</span> <span class="n">H1</span><span class="p">,</span> <span class="n">W1</span><span class="p">,</span> <span class="n">m_w</span><span class="p">,</span> <span class="p">(</span><span class="n">Iw</span><span class="p">,</span> <span class="n">H1</span><span class="p">))</span>
<span class="n">Wheel2</span> <span class="o">=</span> <span class="n">RigidBody</span><span class="p">(</span><span class="s1">&#39;Wheel2&#39;</span><span class="p">,</span> <span class="n">H2</span><span class="p">,</span> <span class="n">W2</span><span class="p">,</span> <span class="n">m_w</span><span class="p">,</span> <span class="p">(</span><span class="n">Iw</span><span class="p">,</span> <span class="n">H2</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The same can be done for the body of the robot. In this case we model the body as a symmetric object with inertias $I_{xx}$, $I_{yy}$, and $I_{zz}$. The center of mass of the body is located a distance $d$ in front of the wheel axel.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Calculate inertia of body</span>
<span class="n">Ib</span> <span class="o">=</span> <span class="n">inertia</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">Ixx</span><span class="p">,</span> <span class="n">Iyy</span><span class="p">,</span> <span class="n">Izz</span><span class="p">)</span>

<span class="c1">#Center of mass of body</span>
<span class="n">Cm</span> <span class="o">=</span> <span class="n">Cw</span><span class="o">.</span><span class="n">locatenew</span><span class="p">(</span><span class="s1">&#39;Cm&#39;</span><span class="p">,</span> <span class="n">d</span><span class="o">*</span><span class="n">R</span><span class="o">.</span><span class="n">x</span><span class="p">)</span>
<span class="n">Cm</span><span class="o">.</span><span class="n">v2pt_theory</span><span class="p">(</span><span class="n">Cw</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">R</span><span class="p">)</span>

<span class="c1">#Create a rigid body object for body</span>
<span class="n">Body</span> <span class="o">=</span> <span class="n">RigidBody</span><span class="p">(</span><span class="s1">&#39;Body&#39;</span><span class="p">,</span> <span class="n">Cm</span><span class="p">,</span> <span class="n">R</span><span class="p">,</span> <span class="n">m_b</span><span class="p">,</span> <span class="p">(</span><span class="n">Ib</span><span class="p">,</span> <span class="n">Cm</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Nonholonomic-Constraints">Nonholonomic Constraints<a class="anchor-link" href="#Nonholonomic-Constraints">&#182;</a></h2><p>At this point, the lagrangian of the system can be calculated. However, the system still isn't fully defined; the constraints still need to be specificed.</p>
<p>At this instance in time, the velocity of the ground contact points must have a velocity of zero. To specify this in the lagrange equations, a constraint matrix needs to be created.</p>
<p>First, two points are created where the wheels contact the ground, and their velocities calculated.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Create two points, where the wheels contact the ground</span>
<span class="n">C1</span> <span class="o">=</span> <span class="n">H1</span><span class="o">.</span><span class="n">locatenew</span><span class="p">(</span><span class="s1">&#39;C1&#39;</span><span class="p">,</span> <span class="o">-</span><span class="n">r</span><span class="o">*</span><span class="n">R</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
<span class="n">C2</span> <span class="o">=</span> <span class="n">H2</span><span class="o">.</span><span class="n">locatenew</span><span class="p">(</span><span class="s1">&#39;C2&#39;</span><span class="p">,</span> <span class="o">-</span><span class="n">r</span><span class="o">*</span><span class="n">R</span><span class="o">.</span><span class="n">z</span><span class="p">)</span>
<span class="c1">#Calculate velocity of points</span>
<span class="n">C1</span><span class="o">.</span><span class="n">v2pt_theory</span><span class="p">(</span><span class="n">H1</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">W1</span><span class="p">)</span>
<span class="n">C2</span><span class="o">.</span><span class="n">v2pt_theory</span><span class="p">(</span><span class="n">H2</span><span class="p">,</span> <span class="n">N</span><span class="p">,</span> <span class="n">W2</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Using these velocities, a system of equations can be created. As the velocities must be zero, this expression = 0.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Express the velocity of points in the inertial frame</span>
<span class="n">con1</span> <span class="o">=</span> <span class="n">C1</span><span class="o">.</span><span class="n">vel</span><span class="p">(</span><span class="n">N</span><span class="p">)</span><span class="o">.</span><span class="n">express</span><span class="p">(</span><span class="n">N</span><span class="p">)</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">con2</span> <span class="o">=</span> <span class="n">C2</span><span class="o">.</span><span class="n">vel</span><span class="p">(</span><span class="n">N</span><span class="p">)</span><span class="o">.</span><span class="n">express</span><span class="p">(</span><span class="n">N</span><span class="p">)</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="c1">#Create a matrix of constraints</span>
<span class="n">constraints</span> <span class="o">=</span> <span class="n">con1</span><span class="o">.</span><span class="n">col_join</span><span class="p">(</span><span class="n">con2</span><span class="p">)</span>
<span class="n">mprint</span><span class="p">(</span><span class="n">constraints</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Matrix([
[(-r*phi_1&#39; + w*theta&#39;)*cos(theta) + x&#39;],
[(-r*phi_1&#39; + w*theta&#39;)*sin(theta) + y&#39;],
[                                     0],
[(-r*phi_2&#39; - w*theta&#39;)*cos(theta) + x&#39;],
[(-r*phi_2&#39; - w*theta&#39;)*sin(theta) + y&#39;],
[                                     0]])
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There are 6 equations with 3 unknowns ($\dot{x}$, $\dot{y}$, and $\dot{theta}$), there are duplicate equations. Using solve, and reconfiguring the expression, this can be reduced to the required set:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Solve for dx, dy, and dtheta in terms of dphi1 and dphi2</span>
<span class="n">sol</span> <span class="o">=</span> <span class="n">solve</span><span class="p">(</span><span class="n">constraints</span><span class="p">,</span> <span class="n">dq</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>

<span class="c1">#Split the resulting dict into a rhs and lhs, that are equivalent</span>
<span class="n">sol_rhs</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">sol</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
<span class="n">sol_lhs</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">(</span><span class="n">sol</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

<span class="c1">#Since sol_rhs = sol_lhs --&gt; sol_rhs - sol_lhs = 0</span>
<span class="c1">#This forms the basis of our constraint matrix.</span>
<span class="c1">#Combining, and solving for a linear representation:</span>
<span class="n">c</span> <span class="o">=</span> <span class="p">(</span><span class="n">sol_rhs</span> <span class="o">-</span> <span class="n">sol_lhs</span><span class="p">)</span><span class="o">.</span><span class="n">jacobian</span><span class="p">(</span><span class="n">dq</span><span class="p">[:</span><span class="mi">5</span><span class="p">])</span>
<span class="n">mprint</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Matrix([
[-1,  0,  0, r*cos(theta)/2, r*cos(theta)/2],
[ 0,  0, -1,        r/(2*w),       -r/(2*w)],
[ 0, -1,  0, r*sin(theta)/2, r*sin(theta)/2]])
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is our constraint matrix. The <code>LagrangesMethod</code> class requires that the constraints be specified as</p>
<p><code>coneqs</code> = $ C\dot{\vec{q}} = 0 $</p>
<p>Thus:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Constraint Equations</span>
<span class="n">coneqs</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span><span class="o">*</span><span class="n">dq</span><span class="p">)</span>
<span class="n">mprint</span><span class="p">(</span><span class="n">coneqs</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Matrix([
[r*cos(theta)*phi_1&#39;/2 + r*cos(theta)*phi_2&#39;/2 - x&#39;],
[          r*phi_1&#39;/(2*w) - r*phi_2&#39;/(2*w) - theta&#39;],
[r*sin(theta)*phi_1&#39;/2 + r*sin(theta)*phi_2&#39;/2 - y&#39;]])
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Generalized-Forces">Generalized Forces<a class="anchor-link" href="#Generalized-Forces">&#182;</a></h2><p>The inputs of system are the torques at the wheels. Using the right-hand-rule, it can be seen that a positive torque will exert force on the system in the $R_x$ direction. With a wheel radius of $r$, the force on the wheel hubs is:</p>
<p>$\vec{F_{hub}} = \tau*\vec{R_x}$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Define forces on system:</span>
<span class="n">T1</span><span class="p">,</span> <span class="n">T2</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;tau_1, tau_2&#39;</span><span class="p">)</span>              <span class="c1">#Torques from the wheels</span>
<span class="n">fl</span> <span class="o">=</span> <span class="p">[(</span><span class="n">H1</span><span class="p">,</span> <span class="n">r</span><span class="o">*</span><span class="n">T1</span><span class="o">*</span><span class="n">R</span><span class="o">.</span><span class="n">x</span><span class="p">),</span>
      <span class="p">(</span><span class="n">H2</span><span class="p">,</span> <span class="n">r</span><span class="o">*</span><span class="n">T2</span><span class="o">*</span><span class="n">R</span><span class="o">.</span><span class="n">x</span><span class="p">)]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Solving-the-System-Dynamics">Solving the System Dynamics<a class="anchor-link" href="#Solving-the-System-Dynamics">&#182;</a></h2><p>We are now ready to solve the for the equations of motion. First, calculate the lagrangian of the system $L = T - V$:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Lag</span> <span class="o">=</span> <span class="n">Lagrangian</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">Wheel1</span><span class="p">,</span> <span class="n">Wheel2</span><span class="p">,</span> <span class="n">Body</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next, a <code>LagrangesMethod</code> object is created. This takes the following parameters:</p>
<ul>
<li>The system lagrangian</li>
<li>The generalized coordinate vector $\vec{q}$</li>
<li>The constraint equations</li>
<li>A list force tuples: (Point, Force at point)</li>
<li>An inertial reference frame</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lm</span> <span class="o">=</span> <span class="n">LagrangesMethod</span><span class="p">(</span><span class="n">Lag</span><span class="p">,</span> <span class="n">q</span><span class="p">,</span> <span class="n">coneqs</span><span class="o">=</span><span class="n">coneqs</span><span class="p">,</span> <span class="n">forcelist</span><span class="o">=</span><span class="n">fl</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="n">N</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The equations of motion can then be found:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">le</span> <span class="o">=</span> <span class="n">lm</span><span class="o">.</span><span class="n">form_lagranges_equations</span><span class="p">()</span>
<span class="n">mprint</span><span class="p">(</span><span class="n">le</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Matrix([
[                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     m_b*(-2*d*sin(theta)*theta&#39;&#39; - 2*d*cos(theta)*theta&#39;**2 + 2*x&#39;&#39;)/2 + m_w*(-2*w*sin(theta)*theta&#39;**2 + 2*w*cos(theta)*theta&#39;&#39; + 2*x&#39;&#39;)/2 + m_w*(2*w*sin(theta)*theta&#39;**2 - 2*w*cos(theta)*theta&#39;&#39; + 2*x&#39;&#39;)/2 - r*tau_1*cos(theta) - r*tau_2*cos(theta) - lam1],
[                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     m_b*(-2*d*sin(theta)*theta&#39;**2 + 2*d*cos(theta)*theta&#39;&#39; + 2*y&#39;&#39;)/2 + m_w*(-2*w*sin(theta)*theta&#39;&#39; - 2*w*cos(theta)*theta&#39;**2 + 2*y&#39;&#39;)/2 + m_w*(2*w*sin(theta)*theta&#39;&#39; + 2*w*cos(theta)*theta&#39;**2 + 2*y&#39;&#39;)/2 - r*tau_1*sin(theta) - r*tau_2*sin(theta) - lam3],
[Izz*theta&#39;&#39; - m_b*(d*(-sin(theta)*y&#39; - cos(theta)*x&#39;)*theta&#39; - d*sin(theta)*theta&#39;*y&#39; - d*cos(theta)*theta&#39;*x&#39;)/2 + m_b*(2*d**2*theta&#39;&#39; + d*(-sin(theta)*theta&#39;*y&#39; - sin(theta)*x&#39;&#39; - cos(theta)*theta&#39;*x&#39; + cos(theta)*y&#39;&#39;) - d*sin(theta)*theta&#39;*y&#39; - d*sin(theta)*x&#39;&#39; - d*cos(theta)*theta&#39;*x&#39; + d*cos(theta)*y&#39;&#39;)/2 + m_w*(3*r**2 + t_w**2)*theta&#39;&#39;/6 - m_w*(-w*(-sin(theta)*x&#39; + cos(theta)*y&#39;)*theta&#39; + w*sin(theta)*theta&#39;*x&#39; - w*cos(theta)*theta&#39;*y&#39;)/2 - m_w*(w*(-sin(theta)*x&#39; + cos(theta)*y&#39;)*theta&#39; - w*sin(theta)*theta&#39;*x&#39; + w*cos(theta)*theta&#39;*y&#39;)/2 + m_w*(2*w**2*theta&#39;&#39; - w*(-sin(theta)*theta&#39;*x&#39; + sin(theta)*y&#39;&#39; + cos(theta)*theta&#39;*y&#39; + cos(theta)*x&#39;&#39;) + w*sin(theta)*theta&#39;*x&#39; - w*sin(theta)*y&#39;&#39; - w*cos(theta)*theta&#39;*y&#39; - w*cos(theta)*x&#39;&#39;)/2 + m_w*(2*w**2*theta&#39;&#39; + w*(-sin(theta)*theta&#39;*x&#39; + sin(theta)*y&#39;&#39; + cos(theta)*theta&#39;*y&#39; + cos(theta)*x&#39;&#39;) - w*sin(theta)*theta&#39;*x&#39; + w*sin(theta)*y&#39;&#39; + w*cos(theta)*theta&#39;*y&#39; + w*cos(theta)*x&#39;&#39;)/2 - r*tau_1*w + r*tau_2*w - lam2],
[                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    m_w*r**2*phi_1&#39;&#39;/2 + r*lam1*cos(theta)/2 + r*lam3*sin(theta)/2 + r*lam2/(2*w)],
[                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    m_w*r**2*phi_2&#39;&#39;/2 + r*lam1*cos(theta)/2 + r*lam3*sin(theta)/2 - r*lam2/(2*w)]])
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Sympy makes this super easy: no need to do this by hand, and no more mistakes in algebra. However, these are rather complicated equations. Luckily, they can be converted into a function allowing numerical simulation.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Simulation">Simulation<a class="anchor-link" href="#Simulation">&#182;</a></h2><p>To gain insight into the system dynamics, numerical simulation will be used. First, we need to import a few more functions:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="n">lambdify</span><span class="p">,</span> <span class="n">Dummy</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="k">import</span> <span class="n">array</span><span class="p">,</span> <span class="n">hstack</span><span class="p">,</span> <span class="n">linspace</span><span class="p">,</span> <span class="n">ones</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="k">import</span> <span class="n">random</span><span class="p">,</span> <span class="n">interp</span><span class="p">,</span> <span class="n">vstack</span>
<span class="kn">from</span> <span class="nn">scipy.integrate</span> <span class="k">import</span> <span class="n">odeint</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The vector $\ddot{\vec{q}}$ can be calculated in a closed form expression using the <code>rhs</code> method. This method takes quite a long time to solve entirely symbolically (it took over an hour on my machine), so a simplifying assumption will be made: $d = 0$. This is actually pretty reasonable, as the motors and battery will be the heaviest part, and should be situated around the axle.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Substitute in d = 0</span>
<span class="n">lm</span><span class="o">.</span><span class="n">eom</span> <span class="o">=</span> <span class="n">lm</span><span class="o">.</span><span class="n">eom</span><span class="o">.</span><span class="n">subs</span><span class="p">({</span><span class="n">d</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>

<span class="c1">#Solve for the rhs:</span>
<span class="n">rhs</span> <span class="o">=</span> <span class="n">lm</span><span class="o">.</span><span class="n">rhs</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We're almost done, all we need to do is model the dynamics of the motor. In the future there may be dynamics classes for electronics, allowing a piecewise construction like we did for the mechanics (using <code>RigidBody</code>). Defining the motor dynamics using the current code-base isn't terribly tricky though.</p>
<p>In general, we can model the current dynamics of the motor as follows:</p>
$$
\dot{i} = -K/L \dot{\phi} - R/L i + V/L
$$$$
\tau = K i
$$<p>where $i$ and $V$ are the current and voltage through the motor, $K$ is the motor constant, $R$ is the coil resistance, and $L$ is the coil inductance. Creating this model in sympy is fairly straightforward:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Create dynamic symbols for current and voltage</span>
<span class="n">i_1</span><span class="p">,</span> <span class="n">i_2</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s1">&#39;i_1, i_2&#39;</span><span class="p">)</span>        <span class="c1">#Currents through motor 1 and 2</span>
<span class="n">V_1</span><span class="p">,</span> <span class="n">V_2</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;V_1, V_2&#39;</span><span class="p">)</span>               <span class="c1">#Voltages across the motor terminals</span>

<span class="c1">#Define some motor constants.</span>
<span class="c1">#Assuming motor 1 and 2 are the same:</span>
<span class="n">R</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;R&#39;</span><span class="p">)</span>                             <span class="c1">#Coil resistance</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">)</span>                             <span class="c1">#Coil inductance</span>
<span class="n">K1</span><span class="p">,</span> <span class="n">K2</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;K1, K2&#39;</span><span class="p">)</span>                   <span class="c1">#Motor constant</span>

<span class="c1">#Define the motor dynamics</span>
<span class="n">di</span> <span class="o">=</span> <span class="n">Matrix</span><span class="p">([[</span><span class="o">-</span><span class="n">K1</span><span class="o">/</span><span class="n">L</span><span class="o">*</span><span class="n">phi1</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span> <span class="o">-</span> <span class="n">R</span><span class="o">/</span><span class="n">L</span><span class="o">*</span><span class="n">i_1</span> <span class="o">+</span> <span class="n">V_1</span><span class="o">/</span><span class="n">L</span><span class="p">],</span>
             <span class="p">[</span><span class="o">-</span><span class="n">K2</span><span class="o">/</span><span class="n">L</span><span class="o">*</span><span class="n">phi2</span><span class="o">.</span><span class="n">diff</span><span class="p">()</span> <span class="o">-</span> <span class="n">R</span><span class="o">/</span><span class="n">L</span><span class="o">*</span><span class="n">i_2</span> <span class="o">+</span> <span class="n">V_2</span><span class="o">/</span><span class="n">L</span><span class="p">]])</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now we just need to combine the motor model with the model for the robot:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Define consts:</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="n">Izz</span><span class="p">,</span>  <span class="n">t_w</span><span class="p">,</span>  <span class="n">m_w</span><span class="p">,</span>    <span class="n">r</span><span class="p">,</span>  <span class="n">m_b</span><span class="p">,</span>   <span class="n">w</span><span class="p">,</span>    <span class="n">R</span><span class="p">,</span>      <span class="n">L</span><span class="p">,</span>   <span class="n">K1</span><span class="p">,</span>  <span class="n">K2</span><span class="p">]</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span>  <span class="mi">5</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span>  <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span>  <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span>       <span class="c1">#Values of constants</span>

<span class="c1">#Create a list of dynamic symbols for simulation</span>
<span class="n">dynamics</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">dq</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">lm</span><span class="o">.</span><span class="n">lam_vec</span><span class="o">.</span><span class="n">T</span><span class="o">.</span><span class="n">tolist</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">i_1</span><span class="p">,</span> <span class="n">i_2</span><span class="p">]</span>

<span class="c1">#Set the inputs to be the motor voltages</span>
<span class="n">inputs</span> <span class="o">=</span> <span class="p">[</span><span class="n">V_1</span><span class="p">,</span> <span class="n">V_2</span><span class="p">]</span>

<span class="c1">#Add the motor model to the rhs equations</span>
<span class="n">aug_rhs</span> <span class="o">=</span> <span class="n">rhs</span><span class="o">.</span><span class="n">col_join</span><span class="p">(</span><span class="n">di</span><span class="p">)</span>

<span class="c1">#Substitute in K*i for T in the rhs equations</span>
<span class="n">aug_rhs</span> <span class="o">=</span> <span class="n">aug_rhs</span><span class="o">.</span><span class="n">subs</span><span class="p">({</span><span class="n">T1</span><span class="p">:</span> <span class="n">K1</span><span class="o">*</span><span class="n">i_1</span><span class="p">,</span> <span class="n">T2</span><span class="p">:</span> <span class="n">K2</span><span class="o">*</span><span class="n">i_2</span><span class="p">})</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This can now be converted into a function to solve the rhs based on current state using <code>lambdify</code>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Create a list of dynamic symbols for simulation</span>
<span class="n">dummys</span> <span class="o">=</span> <span class="p">[</span><span class="n">Dummy</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dynamics</span><span class="p">]</span>
<span class="n">dummydict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">dynamics</span><span class="p">,</span> <span class="n">dummys</span><span class="p">))</span>
<span class="c1">#Sub in the dummy symbols</span>
<span class="n">rhs_dummy</span> <span class="o">=</span> <span class="n">aug_rhs</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">dummydict</span><span class="p">)</span>
<span class="c1">#Lambdify function</span>
<span class="n">rhs_func</span> <span class="o">=</span> <span class="n">lambdify</span><span class="p">(</span><span class="n">dummys</span> <span class="o">+</span> <span class="n">inputs</span> <span class="o">+</span> <span class="n">params</span><span class="p">,</span> <span class="n">rhs_dummy</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Create a function in the required format for odeint</span>
<span class="k">def</span> <span class="nf">right_hand_side</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">us</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Calculate the rhs of the integral, at</span>
<span class="sd">    time t, state x.</span>
<span class="sd">    ts, us are used to get the current input</span>
<span class="sd">    values are constants in the integral&quot;&quot;&quot;</span>
    
    <span class="c1">#Interp is needed to get u for timestep</span>
    <span class="n">u1</span> <span class="o">=</span> <span class="n">interp</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">us</span><span class="p">[:,</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">u2</span> <span class="o">=</span> <span class="n">interp</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">us</span><span class="p">[:,</span><span class="mi">1</span><span class="p">])</span>
    
    <span class="n">arguments</span> <span class="o">=</span> <span class="n">hstack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">u1</span><span class="p">,</span> <span class="n">u2</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>
    
    <span class="c1">#Need call to array and reshape, as odeint</span>
    <span class="c1">#requires state vector to be 1d</span>
    <span class="n">dx</span> <span class="o">=</span> <span class="n">array</span><span class="p">(</span><span class="n">rhs_func</span><span class="p">(</span><span class="o">*</span><span class="n">arguments</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">dx</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">dx</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now we have everything we need to simulate the motion. First, let's see what happens if we input a constant, unbalanced voltage signal. Motor 1 gets 24 volts, Motor 2 gets 20 volts. Intuitively, this should cause the robot to drive in a circle.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ts</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">3000</span><span class="p">)</span>
<span class="n">us</span> <span class="o">=</span> <span class="n">vstack</span><span class="p">((</span><span class="mi">24</span><span class="o">*</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ts</span><span class="p">)),</span> <span class="mi">20</span><span class="o">*</span><span class="n">ones</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ts</span><span class="p">))))</span><span class="o">.</span><span class="n">T</span>
<span class="c1">#Run the simulation</span>
<span class="n">x0</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,]</span> <span class="o">*</span> <span class="mi">15</span>                         <span class="c1">#Start out at origin, unmoving</span>
<span class="n">xs</span> <span class="o">=</span> <span class="n">odeint</span><span class="p">(</span><span class="n">right_hand_side</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">us</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">[:,</span><span class="mi">5</span><span class="p">],</span> <span class="n">xs</span><span class="p">[:,</span><span class="mi">6</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Robot Position&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x (m)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;y (m)&#39;</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
/owxZoT+Hz+Z527QQzcPAAAAAElFTkSuQmCC
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As seen by the simulation, the results line up with our intuition. The reason it doesn't immediately start out in a circle is due to the time it takes for it to accelerate from rest.</p>
<p>Next, lets see what happens when the input voltages are matched:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ts</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">us</span> <span class="o">=</span> <span class="mi">20</span><span class="o">*</span><span class="n">ones</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">ts</span><span class="p">),</span><span class="mi">2</span><span class="p">))</span>
<span class="c1">#Run the simulation</span>
<span class="n">x0</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,]</span> <span class="o">*</span> <span class="mi">15</span>                         <span class="c1">#Start out at origin, unmoving</span>
<span class="n">xs</span> <span class="o">=</span> <span class="n">odeint</span><span class="p">(</span><span class="n">right_hand_side</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">us</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">xs</span><span class="p">[:,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Robot Position&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x (m)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;y (m)&#39;</span><span class="p">);</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYwAAAEXCAYAAAC+mHPKAAAABHNCSVQICAgIfAhkiAAAAAlwSFlz
AAALEgAACxIB0t1+/AAAHr1JREFUeJzt3XtwVPX9//HXycVLIOXOApvItiSUkIQkllvbiSyFQAEJ
IJaLgBECZlBAOh0Ga7EGCxS81IHgOGiVmzeKUwRLSEFkwdGB1YqooHINJCFkDBdJkCEhfn5/+GO/
hiTm5LokPB8zO7PnnM+e8/54ZF8553POWcsYYwQAQDUC/F0AAKBpIDAAALYQGAAAWwgMAIAtBAYA
wBYCAwBgC4GBm47L5dLOnTv9XYZtoaGhys7OrnJ5TEyM9uzZ03gF4aZFYKBJcrlcCgkJUWhoqDp1
6qQpU6bo4sWLtj5rWZYsy6rVdgMCAnT8+PEql69Zs0aBgYEKDQ1Vq1atlJCQoK1bt9ZqW9cUFRXJ
5XJJkh544AE9/vjj5ZZ/8cUXuuuuu+q0DcAOAgNNkmVZ+s9//qOioiIdOHBAn3/+uRYtWtQo267u
Xtff/va3Kioq0oULF5Samqpx48bp22+/bZTagIZEYKDJczgcGjJkiA4ePOibt2XLFkVHR6tNmzYa
OHCgvvrqq3Kf8Xq9io6OVtu2bTVt2jRduXLFt+yll15SZGSk2rVrp1GjRik/P1+SfH/Fx8XFKTQ0
VBs3bqy0nmuBYlmWpk6dqsuXL+vYsWP69ttvdf/996tjx45yuVxavHixr+3Ro0c1YMAAtW7dWh06
dNCECRN86wsICNCxY8f04osv6vXXX9dTTz2l0NBQjRo1SlL5U2xXrlzR3Llz5XQ65XQ69cc//lEl
JSWSJI/Ho7CwMP3jH/+Qw+FQly5dtGbNmlr/d8fNh8BAk3XtyzY3N1dZWVnq16+fJOnw4cO67777
tGLFChUWFmr48OEaOXKkrl696vvc66+/ru3bt+vYsWM6fPiw7+jkvffe02OPPaaNGzcqPz9fXbt2
9X15Xxsn+Oyzz1RUVKQ//OEPP1nf1atX9c9//lOhoaGKiIjQ7NmzVVRUpBMnTmj37t1at26dVq9e
LUl6/PHH9fvf/14XLlxQXl6e5syZU25dlmXpwQcf1KRJkzR//nwVFRVp8+bNvmXXTrEtXrxYXq9X
Bw4c0IEDB+T1essdeRUUFOjixYs6ffq0Xn75ZT388MMc/cA+AzRBXbt2NS1btjShoaHGsiwzevRo
U1ZWZowx5sknnzTjx4/3tf3++++N0+k0u3fvNsYY43K5zKpVq3zLMzMzTbdu3YwxxkybNs3Mnz/f
t6y4uNgEBwebkydPGmOMsSzLHDt2rMq6Vq9ebYKCgkzr1q1N+/btza9//Wuzc+dOc/XqVXPLLbeY
L7/80td21apVxu12G2OMuf/++82DDz5ocnNzK6zzx9t84IEHzIIFC8otd7lcZufOncYYY7p162a2
bdvmW/bf//7XuFwuY4wxu3btMrfffrvvv5MxxnTs2NHs27evyv4AP8YRBpoky7K0efNmXbx4UR6P
R++9954+/vhjSVJ+fr7uuOOOcm3Dw8OVl5fnmxceHu57f8cdd+j06dO+z3bt2tW3rEWLFmrXrl25
z1anf//+On/+vL755ht9+OGH+t3vfqfCwkKVlpaWW/cdd9zhW+9TTz0lY4z69u2rmJgY35FHTZ0+
fbrCNq71TZLatWungID/+2cfEhKi4uLiWm0LNx8CA03eXXfdpdmzZ2v+/PmSpC5duujkyZO+5cYY
5eTkyOl0+uadOnWq3Ptry7p06VLuEtZLly7p7Nmz5T5bG+3bt1dwcHC5dZ86dUphYWGSfhiHefHF
F5WXl6dVq1bpoYceqvRqrOqu7rq+/lOnTqlLly51qh24hsBAszB37lx5vV7t27dP48aN09atW/Xe
e++ptLRUzz77rG677Tb95je/kfRDgDz//PPKy8vTuXPntHjxYo0fP16SNHHiRK1evVoHDhzQlStX
9Nhjj6l///6+IxaHw6Fjx47VuL7AwECNGzdOf/nLX1RcXKyTJ0/queee0+TJkyVJGzduVG5uriSp
devWsiyr3JHANQ6H4ycv6504caIWLVqkwsJCFRYW6sknn9SUKVNqXC9QGQIDzUL79u2VkpKiZcuW
qXv37nr11Vc1e/ZsdejQQVu3btU777yjoKAgST/8lT5p0iQNGTJE3bp1U2RkpBYsWCBJGjRokP72
t79p7Nix6tKli06cOKE333zTt5309HSlpKSoTZs2euuttyrU8VP3eGRkZKhFixb6xS9+ocTERE2a
NEnTpk2TJH388cfq37+/7+qnFStW+O69+PH6UlNTdejQIbVp00b33HNPhW0sWLBAvXv3Vq9evdSr
Vy/17t3b17fr1wXUlGUMP6AEAKie344wcnJyNHDgQEVHRysmJkYrVqyotN2cOXMUGRmpuLg47d+/
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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As expected, the robot drives in a straight line.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Simulation---Need-for-control">Simulation - Need for control<a class="anchor-link" href="#Simulation---Need-for-control">&#182;</a></h2><p>Currently our robot is driven in "open-loop" control. This means that an input signal is sent, but no output is measured. This is fine if our model is perfect, and there are no disturbances. But the real world isn't like that. For example, what if our motors aren't perfectly balanced, and had slightly different K values?</p>
<p>To see, we'll change the K value of Motor 2 to 0.99. Just a small difference.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Change the value of K_2</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.99</span><span class="p">]</span>

<span class="c1">#Re-run the straight line simulation</span>
<span class="n">ts</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
<span class="n">us</span> <span class="o">=</span> <span class="mi">24</span><span class="o">*</span><span class="n">ones</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">ts</span><span class="p">),</span><span class="mi">2</span><span class="p">))</span>

<span class="c1">#Run the simulation</span>
<span class="n">x0</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,]</span> <span class="o">*</span> <span class="mi">15</span>                         <span class="c1">#Start out at origin, unmoving</span>
<span class="n">xs</span> <span class="o">=</span> <span class="n">odeint</span><span class="p">(</span><span class="n">right_hand_side</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">ts</span><span class="p">,</span> <span class="n">us</span><span class="p">,</span> <span class="n">values</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">xs</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">xs</span><span class="p">[:,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Robot Position&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;x (m)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;y (m)&#39;</span><span class="p">);</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area"><div class="prompt"></div>


<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
l6hgiIiIS/4/jerXKIePMNAAAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After 10 seconds, the robot is already 2.5 m off it's intended course! Luckily, a simple feedback controller should be able to solve this.</p>
<p>As our model is highly nonlinear, the first thing that should be done is to linearize it about our setpoint. However, currently the <code>LagrangesMethod</code> class doesn't have a linearization method. And because there are constraints, simply computing the Jacobian of the RHS isn't a valid solution. So an LQR controller, or other traditional state space design methods are out.</p>
<p>To develop a controller for this robot, a simple linear model would need to be developed. This will be covered in part 2, but for now, let's just save the model to file so it can be opened later without rederiving:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#srepr returns the python code needed to recreate a</span>
<span class="c1">#sympy expression</span>
<span class="kn">from</span> <span class="nn">sympy.printing</span> <span class="k">import</span> <span class="n">srepr</span>

<span class="k">def</span> <span class="nf">save_sol</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Save a sympy expression to file</span>
<span class="sd">    </span>
<span class="sd">    To reload the expression:</span>
<span class="sd">    </span>
<span class="sd">       import file_path</span>
<span class="sd">       expression = file_path.load()</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">fil</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
    <span class="n">fil</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;from sympy import *</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">fil</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;def load():</span><span class="se">\n</span><span class="s2">    expression=&quot;</span><span class="p">)</span>
    <span class="n">fil</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">srepr</span><span class="p">(</span><span class="n">expr</span><span class="p">))</span>
    <span class="n">fil</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">    return expression&quot;</span><span class="p">)</span>
    <span class="n">fil</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Save the rhs for later evaluation</span>
<span class="n">save_sol</span><span class="p">(</span><span class="n">rhs</span><span class="p">,</span> <span class="s2">&quot;robot_rhs.py&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This can later be reloaded by calling:</p>

<pre><code>import robot_rhs
rhs = robot_rhs.load()

</code></pre>
<p>In a later example, a controller will be developed using this model for simulation, so it's nice not to have to rederive the expression.</p>
<p>Overall, the <code>sympy.physics.mechanics</code> workflow for modeling multibody dynamics is easy to use. As shown above, the tools for generating a model based off of its components (wheels, body, etc...), solving for the system dynamics, and then simulating the resulting expression are provided in an intuitive manner. While larger/more complicated models may take some time (I've gotten the <a href="https://github.com/pydy/pydy_examples/tree/master/npendulum">n-pendulum example</a> to solve for up to 25 links), the resulting expression in symbolic form allows for simulation and analysis in a way that traditional numerical methods cannot provide. With some improvements to the simplification routines, and the addition of a linearization routine the hope is that the complicated expressions shown here can be simplified to "human readable form". This would allow for fast run-time due to simplified expressions, as well as easier analysis.</p>
<p><em>Note: The code used here was developed as part of the <a href="https://pydy.org/">pydy</a> project. Other awesome portions of the <code>pydy</code> workflow have not been demonstrated here. Some work is currently being done on <a href="https://github.com/pydy/pydy-code-gen">code generation</a> to generate code in <code>C</code>, <code>FORTRAN</code>, or other language from a <code>sympy</code> expression. This would allow for faster simulations, and easy integration into embedded controllers or estimators. There is also some work being done on <a href="https://github.com/pydy/pydy-viz">visualization</a>, resulting in an animation of the system dynamics running in a browser.</em></p>
<p><em>This IPython notebook may be downloaded from <a href="https://github.com/jcrist/pydy_examples/tree/master/differential_drive">here</a></em></p>

</div>
</div>
</div></p>


<div class="container bottom">
    <hr>
    <p>
        All content copyright 2014-2016 Jim Crist unless otherwise noted.
        Licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons</a>.
    </p>
    <p>
    Find me on <a href="https://twitter.com/jiminy_crist">Twitter</a>, <a 
        href="https://github.com/jcrist">GitHub</a>, <a
        href="https://speakerdeck.com/jcrist">Speaker Deck</a>, or shoot me an <a
    href="mailto:crist042@umn.edu">email</a>.
    </p>
</div>    </div>
</body>
</html>