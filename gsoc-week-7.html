<!doctype html>
<html lang="en">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1" />
    <!--RSS FEEDS-->
        <link rel="alternate"  href="https://jcristharif.com/feeds/all.atom.xml" type="application/atom+xml" title="Jim Crist-Harif Full Atom Feed"/>

    <title>GSoC Week 7: Expression Trees and Substitution // Jim Crist-Harif</title>
    <link rel="stylesheet" href="https://jcristharif.com/theme/css/normalize.css" type="text/css" />
    <link rel="stylesheet" href="https://jcristharif.com/theme/css/base.css" type="text/css" />
    <link rel="stylesheet" href="https://jcristharif.com/theme/css/code.css" type="text/css" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
        TeX: { equationNumbers: { autoNumber: "all" } }
    });
</script>
<script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</head>
<body>
    <header>
      <h1><a href="https://jcristharif.com/">Jim Crist-Harif</a></h1>
      <ul>
              <li><a href="https://jcristharif.com/blog.html">Blog</a></li>
              <li><a href="https://jcristharif.com/pages/about.html">About</a></li>
              <li><a href="https://jcristharif.com/pages/talks.html">Talks</a></li>
      </ul>
    </header>

    <section>
    <h1>GSoC Week 7: Expression Trees and Substitution</h1>
    <p class="article-date">Posted on July 06, 2014</p>
    <style type="text/css">/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI escape sequences */
/* The color values are a mix of
   http://www.xcolors.net/dl/baskerville-ivorylight and
   http://www.xcolors.net/dl/euphrasia */
.ansi-black-fg {
  color: #3E424D;
}
.ansi-black-bg {
  background-color: #3E424D;
}
.ansi-black-intense-fg {
  color: #282C36;
}
.ansi-black-intense-bg {
  background-color: #282C36;
}
.ansi-red-fg {
  color: #E75C58;
}
.ansi-red-bg {
  background-color: #E75C58;
}
.ansi-red-intense-fg {
  color: #B22B31;
}
.ansi-red-intense-bg {
  background-color: #B22B31;
}
.ansi-green-fg {
  color: #00A250;
}
.ansi-green-bg {
  background-color: #00A250;
}
.ansi-green-intense-fg {
  color: #007427;
}
.ansi-green-intense-bg {
  background-color: #007427;
}
.ansi-yellow-fg {
  color: #DDB62B;
}
.ansi-yellow-bg {
  background-color: #DDB62B;
}
.ansi-yellow-intense-fg {
  color: #B27D12;
}
.ansi-yellow-intense-bg {
  background-color: #B27D12;
}
.ansi-blue-fg {
  color: #208FFB;
}
.ansi-blue-bg {
  background-color: #208FFB;
}
.ansi-blue-intense-fg {
  color: #0065CA;
}
.ansi-blue-intense-bg {
  background-color: #0065CA;
}
.ansi-magenta-fg {
  color: #D160C4;
}
.ansi-magenta-bg {
  background-color: #D160C4;
}
.ansi-magenta-intense-fg {
  color: #A03196;
}
.ansi-magenta-intense-bg {
  background-color: #A03196;
}
.ansi-cyan-fg {
  color: #60C6C8;
}
.ansi-cyan-bg {
  background-color: #60C6C8;
}
.ansi-cyan-intense-fg {
  color: #258F8F;
}
.ansi-cyan-intense-bg {
  background-color: #258F8F;
}
.ansi-white-fg {
  color: #C5C1B4;
}
.ansi-white-bg {
  background-color: #C5C1B4;
}
.ansi-white-intense-fg {
  color: #A1A6B2;
}
.ansi-white-intense-bg {
  background-color: #A1A6B2;
}
.ansi-default-inverse-fg {
  color: #FFFFFF;
}
.ansi-default-inverse-bg {
  background-color: #000000;
}
.ansi-bold {
  font-weight: bold;
}
.ansi-underline {
  text-decoration: underline;
}
/* The following styles are deprecated an will be removed in a future version */
.ansibold {
  font-weight: bold;
}
.ansi-inverse {
  outline: 0.5px dotted;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  position: relative;
  overflow: visible;
}
div.cell:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: transparent;
}
div.cell.jupyter-soft-selected {
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected,
div.cell.selected.jupyter-soft-selected {
  border-color: #ababab;
}
div.cell.selected:before,
div.cell.selected.jupyter-soft-selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #42A5F5;
}
@media print {
  div.cell.selected,
  div.cell.selected.jupyter-soft-selected {
    border-color: transparent;
  }
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
}
.edit_mode div.cell.selected:before {
  position: absolute;
  display: block;
  top: -1px;
  left: -1px;
  width: 5px;
  height: calc(100% +  2px);
  content: '';
  background: #66BB6A;
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  /* Note that this should set vertical padding only, since CodeMirror assumes
       that horizontal padding will be set on CodeMirror pre */
  padding: 0.4em 0;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. This sets horizontal padding only,
    use .CodeMirror-lines for vertical */
  padding: 0 0.4em;
  border: 0;
  border-radius: 0;
}
.CodeMirror-cursor {
  border-left: 1.4px solid black;
}
@media screen and (min-width: 2138px) and (max-width: 4319px) {
  .CodeMirror-cursor {
    border-left: 2px solid black;
  }
}
@media screen and (min-width: 4320px) {
  .CodeMirror-cursor {
    border-left: 4px solid black;
  }
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
div.output_area .mglyph > img {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 1px 0 1px 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}
.rendered_html ul:not(.list-inline),
.rendered_html ol:not(.list-inline) {
  padding-left: 2em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}





.rendered_html pre,




.rendered_html tr,
.rendered_html th,


.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,


.rendered_html * + .alert {
  margin-top: 1em;
}
[dir="rtl"] 
div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.rendered .rendered_html tr,
.text_cell.rendered .rendered_html th,
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.text_cell .dropzone .input_area {
  border: 2px dashed #bababa;
  margin: -1px;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<style type="text/css">
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Late post this week due to the <a href="http://en.wikipedia.org/wiki/Independence_Day_%28United_States%29">celebration of everything that is American</a>. This week I finally got my first PR merged. The general linearization code is now part of the Sympy codebase. I currently have a <a href="https://github.com/sympy/sympy/pull/7681">PR for Lagrange support</a> waiting to be reviewed. After that I just need to write the ReST docs and the first part of the project is "complete". The rest of the week was spent on more optimization work. I'm getting closer to being able to solve the <a href="http://docs.sympy.org/dev/modules/physics/mechanics/bicycle_example.html">bicycle example</a> in a reasonable amount of time!</p>
<p><a href="http://jcrist.github.io/gsoc-week-6.html">Last week's post</a> showed the issues with the large expression size and <code>subs</code> (it takes forever to run). I took some time this week to look into how expressions work in sympy, and wrote a specialized subs function for use in <code>sympy.physics.mechanics</code>. The rest of this post will show give an overview and some benchmarks of this code.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Expression-Trees">Expression Trees<a class="anchor-link" href="#Expression-Trees">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In sympy, expressions are stored as <a href="http://en.wikipedia.org/wiki/Tree_%28data_structure%29">trees</a>. Each node is an object that has an attribute <code>args</code> that contains a list of it's child nodes. This is best shown by an example:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sympy</span> <span class="k">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">sympy.printing.dot</span> <span class="k">import</span> <span class="n">dotprint</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">symbols</span><span class="p">(</span><span class="s1">&#39;a, b, c&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">+</span> <span class="n">a</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">b</span>
<span class="n">test</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>a**2/b + a*cos(a + b)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;test.dot&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fil</span><span class="p">:</span>
    <span class="n">fil</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">dotprint</span><span class="p">(</span><span class="n">test</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span>%%bash
dot -Tpng test.dot -o test.png
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.core.display</span> <span class="k">import</span> <span class="n">Image</span> 
<span class="n">Image</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;test.png&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[6]:</div>




<div class="output_png output_subarea output_execute_result">
<img src="data:image/png;base64,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
MWFS/g+6hlevGVSkaAAAAABJRU5ErkJggg==
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The root node of this tree is an <code>Add</code> object, as the outermost operation is adding two smaller expressions together. Going down the left side first, we see that $a^2/b$ is stored as multiplying $a^2$ times $b^{-1}$. Sympy doesn't have <code>Div</code> objects, fractions are all expressed using <code>Mul</code>, with the denominator wrapped in a <code>Pow(den, -1)</code>. Traversing the right side $a \cos(a + b)$ is stored as multiplying <code>a</code> and a <code>cos</code> object together. The <code>cos</code> object itself contains one child node - an <code>Add</code> - which holds <code>a</code> and <code>b</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Crawling-the-Tree">Crawling the Tree<a class="anchor-link" href="#Crawling-the-Tree">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The design of sympy expression objects uses two key features: <code>args</code>, and <code>func</code>. As mentioned above, <code>object.args</code> holds a tuple of all the child nodes for that object. Likewise, <code>object.func</code> is a class method that takes in arguments, and returns an instance of that class. For <em>most</em> objects in sympy, running</p>

<pre><code>object.func(*object.args) == object</code></pre>
<p>will be a true expression. I say most because not all objects adhere to this (leaf nodes). There has been a lot of discussion about this <a href="https://github.com/sympy/sympy/wiki/Args-Invariant">here</a>, if you're interested.</p>
<p>One of the great things about this design is that it makes it very easy to write operations that modify these trees using recursion. Normally, recursion in python is frowned upon because the function calls add overhead that could be removed if rewritten as a loop. There is also a maximum recursion depth (default of 1000) to prevent stackoverflow conditions. However, a sympy expression that has 1000 nested nodes is highly unlikely (even in <code>mechanics</code>), and the recursion makes the code <em>much</em> more readable. As the <a href="http://legacy.python.org/dev/peps/pep-0020/">zen of python</a> says, "Readability counts".</p>
<p>A simple crawler to print every node is written below. It consists of two functions.</p>
<p>The first one is a generic function <code>crawl</code>, that crawls the expression tree, calls <code>func</code> on each node, and returns the result if there is one. Otherwise it recurses down a level into the child nodes, forming a list of <code>new_args</code>, and then calls <code>expr.func</code> to rebuild the expression from those args.</p>
<p>The second one is a printer function. As we don't want to modify the expression at all, we'll just print the node, and then return the expression if it doesn't have args (it's a leaf node). Note that there are more efficient ways to traverse the tree and print all the nodes - this is mostly to demonstrate <code>crawl</code>, as it will be used later.</p>
<p>Using these two functions a function that crawls the tree, prints every node, and returns the original expression can be composed using a simple lambda statement.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">crawl</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Crawl the expression tree, and apply func to every node.&quot;&quot;&quot;</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">val</span>
    <span class="n">new_args</span> <span class="o">=</span> <span class="p">(</span><span class="n">crawl</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">expr</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">new_args</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">printer</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Print out every node&quot;&quot;&quot;</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">expr</span>

<span class="n">print_expr</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">expr</span><span class="p">:</span> <span class="n">crawl</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">printer</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's test this function on our expression from above:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">temp</span> <span class="o">=</span> <span class="n">print_expr</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
<span class="c1"># Checking that the expression was unchanged (temp == test)</span>
<span class="k">assert</span> <span class="n">temp</span> <span class="o">==</span> <span class="n">test</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>a**2/b + a*cos(a + b)
a**2/b
a**2
a
2
1/b
b
-1
a*cos(a + b)
a
cos(a + b)
a + b
b
a
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Comparing the printed results with the tree diagram from before, one can see how each big expression can be decomposed into smaller expressions. Further, the rebuilt expression after traversing was identical to the input expression. In the next section we'll write another function that changes the expression tree using <code>crawl</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="A-Custom-subs-Function">A Custom <code>subs</code> Function<a class="anchor-link" href="#A-Custom-subs-Function">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In <code>sympy.physics.mechanics</code>, we deal with symbols, dynamic symbols (which are of type <code>AppliedUndef</code>), and derivatives of these dynamicsymbols. Unfortunately, the provided <code>subs</code> function traverses inside the <code>Derivative</code> terms, giving underdesired results:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sympy.physics.mechanics</span> <span class="k">import</span> <span class="n">dynamicsymbols</span>
<span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">dynamicsymbols</span><span class="p">(</span><span class="s1">&#39;x, y&#39;</span><span class="p">)</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">x</span><span class="o">.</span><span class="n">diff</span><span class="p">())</span>
<span class="n">test</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>a*(x(t) + Derivative(x(t), t))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Subbing in b for x. Desired result is a*(b + x.diff())</span>
<span class="n">test</span><span class="o">.</span><span class="n">subs</span><span class="p">({</span><span class="n">x</span><span class="p">:</span> <span class="n">b</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[10]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>a*(b + Derivative(b, t))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To get around this problem, we've been using a custom function <code>_subs_keep_derivs</code>. This function creates two substitution dictionaries - one with <code>Derivative</code>, and one without. Four substitutions then take place:</p>
<ol>
<li>Perform subs with the terms in the derivative dictionary</li>
<li>Substitute in <code>Dummy</code> symbols for all <code>Derivative</code> terms in the resulting expression</li>
<li>Perform subs with the terms in the non-derivative dictionary</li>
<li>Substitute back the original <code>Derivative</code> terms from the <code>Dummy</code> symbols</li>
</ol>
<p>This is slow due to the need for <em>four calls to expr.subs</em>. Also, <code>subs</code> applies substitutions sequentially (i.e. each term in the substitution dict requires its own tree traversal). For our purposes in <code>mechanics</code>, this is unecessary. Using the already written <code>crawl</code> function, we can compose our own <code>subs</code> that ignores terms inside derivative objects fairly easily:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">sub_func</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Perform expression subsitution, ignoring derivatives.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">expr</span> <span class="ow">in</span> <span class="n">sub_dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sub_dict</span><span class="p">[</span><span class="n">expr</span><span class="p">]</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span> <span class="ow">or</span> <span class="n">expr</span><span class="o">.</span><span class="n">is_Derivative</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">expr</span>
    
<span class="n">new_subs</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">:</span> <span class="n">crawl</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_func</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>That's it. Due to the composable nature of <code>crawl</code>, the code needed to perform this operation is incredibly simple. Let's test it to make sure it on our previous expression:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Simple example</span>
<span class="n">new_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">b</span><span class="p">})</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[12]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>a*(b + Derivative(x(t), t))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So it leaves terms inside derivaties alone, exactly as desired. We can see how this compares to the previous implementation:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Old way of doing things, taken from sympy.physics.mechanics.functions</span>
<span class="k">def</span> <span class="nf">_subs_keep_derivs</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Performs subs exactly as subs normally would be,</span>
<span class="sd">    but doesn&#39;t sub in expressions inside Derivatives.&quot;&quot;&quot;</span>

    <span class="n">ds</span> <span class="o">=</span> <span class="n">expr</span><span class="o">.</span><span class="n">atoms</span><span class="p">(</span><span class="n">Derivative</span><span class="p">)</span>
    <span class="n">gs</span> <span class="o">=</span> <span class="p">[</span><span class="n">Dummy</span><span class="p">()</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">ds</span><span class="p">]</span>
    <span class="n">items</span> <span class="o">=</span> <span class="n">sub_dict</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="n">deriv_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="ow">in</span> <span class="n">items</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">is_Derivative</span><span class="p">)</span>
    <span class="n">sub_dict</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="ow">in</span> <span class="n">items</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">i</span><span class="o">.</span><span class="n">is_Derivative</span><span class="p">)</span>
    <span class="n">dict_to</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">ds</span><span class="p">,</span> <span class="n">gs</span><span class="p">))</span>
    <span class="n">dict_from</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">gs</span><span class="p">,</span> <span class="n">ds</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">expr</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">deriv_dict</span><span class="p">)</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">dict_to</span><span class="p">)</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">sub_dict</span><span class="p">)</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">dict_from</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Benchmark substitution</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using _subs_keep_derivs&quot;</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> _subs_keep_derivs(test, {x: b})
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using new_subs&quot;</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> new_subs(test, {x: b})
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Using _subs_keep_derivs
100 loops, best of 3: 3 ms per loop
Using new_subs
10000 loops, best of 3: 39.9 s per loop
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So it's significantly faster. For this small benchmark, approximately 75x faster. Also, as it works in only one traversal of the tree it has a smaller computational complexity - meaning that for larger expressions this speed increase will be even higher. For kicks, let's see how it compares to normal subs for an expression without derivatives:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># For kicks, see how it compares to subs for expr without derivative:</span>
<span class="n">test</span> <span class="o">=</span> <span class="n">a</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">a</span> <span class="o">-</span> <span class="n">x</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using subs&quot;</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> test.subs(test, {a: 1, b: 2})
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using new subs&quot;</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> new_subs(test, {a: 1, b: 2})
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Using subs
1000 loops, best of 3: 676 s per loop
Using new subs
1000 loops, best of 3: 247 s per loop
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So our implementation of <code>subs</code> is faster than sympy's. However, this micro benchmark isn't all that meaningful. Normal <code>subs</code> works in multiple passes so that expressions inside the <code>sub_dict</code> are also affected. <code>subs</code> also incorporates math knowledge about the expressions, while ours just does a naive direct match and replace. For our purposes though, this is sufficient. Also, as with all micro-benchmarks, this should be taken with a grain of salt. The main point is that our custom subs function is <em>significantly faster</em> than the old method of <code>_subs_keep_derivs</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Custom-Simplification">Custom Simplification<a class="anchor-link" href="#Custom-Simplification">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The other major issue I discussed <a href="http://jcrist.github.io/gsoc-week-6.html">last week</a> was that some expressions result in <code>nan</code> or <code>oo</code> (infinity) when not simplified, but after simplification result in a realizable expression. For example:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">/</span><span class="n">tan</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Before simplification:&quot;</span><span class="p">,</span> <span class="n">test</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After simplification:&quot;</span><span class="p">,</span> <span class="n">simplify</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="o">.</span><span class="n">subs</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Before simplification: nan
After simplification: 1
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For small expressions, doing <code>simplify</code> before evaluation is acceptable, but for larger ones simplification is way too slow. However, these divide by zero errors are caused by subexpressions, not the whole expression. Using some knowledge of the types of expressions present in the mechanics module, we can come up with some simple heuristics for what can result in <code>nan</code>, <code>oo</code> and <code>zoo</code>:</p>
<ol>
<li>tan(pi/2)</li>
<li>Fractions with 0 in the denominator</li>
</ol>
<p>In reality, these are the same thing, because</p>
$$ \tan(\pi/2) = \frac{\sin(\pi/2)}{\cos(\pi/2)} = \frac{1}{0} $$<p>Using this knowledge, we can come up with a simple algorithm for performing subs and catching these issues at the same time:</p>
<ol>
<li>Replace all <code>tan(*)</code> with <code>sin(*)/cos(*)</code>. This will allow us to only have to check for denominator = 0 conditions.</li>
<li>For nodes that are fractions, check if the denominator evaluates to 0. If so, apply <code>simplify</code> to the fraction, and then carry on as normal.</li>
</ol>
<p>This may not catch every instance that results in would result in a <code>nan</code> without simplification, but it should catch most of them. Also, the algorithm is so simple, that it can be implemented in only a few lines. First, the <code>tan</code> replacement. This requires almost no new code, as it can be composed using the already written <code>crawl</code> function:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">tan_repl_func</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Replace tan with sin/cos&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">tan</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">sin</span><span class="p">(</span><span class="o">*</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span><span class="o">/</span><span class="n">cos</span><span class="p">(</span><span class="o">*</span><span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span> <span class="ow">or</span> <span class="n">expr</span><span class="o">.</span><span class="n">is_Derivative</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">expr</span>

<span class="n">tan_repl</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">expr</span><span class="p">:</span> <span class="n">crawl</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">tan_repl_func</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Testing it:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">tan_repl</span><span class="p">(</span><span class="n">tan</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">+</span> <span class="n">tan</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">/</span><span class="n">tan</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[18]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>sin(a)/cos(a) + sin(a)*cos(b)/(sin(b)*cos(a))</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So that works as expected. Now for the second pass; the subs with denominator checking and selective simplification. This takes a little bit more code than before, but I've heavily commented it so you should be able to see what's going on:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">smart_subs_func</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">):</span>
        <span class="c1"># Decompose the expression into num, den</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">den</span> <span class="o">=</span> <span class="n">fraction_decomp</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">den</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># If there is a non trivial denominator, we need to handle it</span>
            <span class="n">denom_subbed</span> <span class="o">=</span> <span class="n">smart_subs_func</span><span class="p">(</span><span class="n">den</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">denom_subbed</span><span class="o">.</span><span class="n">evalf</span><span class="p">()</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># If denom is 0 after this, attempt to simplify the bad expr</span>
                <span class="n">expr</span> <span class="o">=</span> <span class="n">simplify</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># Expression won&#39;t result in nan, find numerator</span>
                <span class="n">num_subbed</span> <span class="o">=</span> <span class="n">smart_subs_func</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">num_subbed</span><span class="o">/</span><span class="n">denom_subbed</span>
        <span class="c1"># We have to crawl the tree manually, because `expr` may have been</span>
        <span class="c1"># modified in the simplify step. First, perform subs as normal:</span>
        <span class="n">val</span> <span class="o">=</span> <span class="n">sub_func</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">val</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">val</span>
        <span class="n">new_args</span> <span class="o">=</span> <span class="p">(</span><span class="n">smart_subs_func</span><span class="p">(</span><span class="n">arg</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">expr</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">new_args</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">fraction_decomp</span><span class="p">(</span><span class="n">expr</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return num, den such that expr = num/den&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">Mul</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">expr</span><span class="p">,</span> <span class="mi">1</span>
    <span class="n">num</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">den</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">expr</span><span class="o">.</span><span class="n">args</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">is_Pow</span> <span class="ow">and</span> <span class="n">a</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">den</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="n">a</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">num</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">den</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">expr</span><span class="p">,</span> <span class="mi">1</span>
    <span class="n">num</span> <span class="o">=</span> <span class="n">Mul</span><span class="p">(</span><span class="o">*</span><span class="n">num</span><span class="p">)</span>
    <span class="n">den</span> <span class="o">=</span> <span class="n">Mul</span><span class="p">(</span><span class="o">*</span><span class="n">den</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">num</span><span class="p">,</span> <span class="n">den</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Finally, we can put everything from above inside a nice wrapper function:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">smart_subs</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Performs subs, checking for conditions that may result in `nan` or </span>
<span class="sd">    `oo`, and attempts to simplify them out.</span>

<span class="sd">    The expression tree is traversed twice, and the following steps are</span>
<span class="sd">    performed on each expression node:</span>
<span class="sd">    - First traverse: </span>
<span class="sd">        Replace all `tan` with `sin/cos`.</span>
<span class="sd">    - Second traverse:</span>
<span class="sd">        If node is a fraction, check if the denominator evaluates to 0.</span>
<span class="sd">        If so, attempt to simplify it out. Then if node is in sub_dict,</span>
<span class="sd">        sub in the corresponding value.&quot;&quot;&quot;</span>
    <span class="n">expr</span> <span class="o">=</span> <span class="n">crawl</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">tan_repl_func</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">smart_subs_func</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's see if it works as expected. Using a simple test case:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test</span> <span class="o">=</span> <span class="n">tan</span><span class="p">(</span><span class="n">a</span><span class="p">)</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="n">sub_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">a</span><span class="p">:</span> <span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Without `smart_subs`:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">new_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;With `smart_subs`:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">smart_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Without `smart_subs`:
nan
With `smart_subs`:
1
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>And some timings:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using `smart_subs`:&quot;</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> smart_subs(test, sub_dict)
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using simplification, then normal subs&quot;</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> simplify(test).subs(sub_dict)
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using trigsimp, then normal subs&quot;</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> trigsimp(test).subs(sub_dict)
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Using `smart_subs`:
10000 loops, best of 3: 92 s per loop
Using simplification, then normal subs
10 loops, best of 3: 42.9 ms per loop
Using trigsimp, then normal subs
10 loops, best of 3: 30.8 ms per loop
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Using selective simplification, the same results can be obtained for a fraction of the cost. 360 times faster for this small test.</p>
<p>Let's see what the overhead of <code>smart_subs</code> is for an expression that doesn't need it:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">cos</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">y</span><span class="p">)</span><span class="o">*</span> <span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">)</span> <span class="o">+</span> <span class="n">a</span><span class="o">/</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="n">x</span><span class="p">)</span>
<span class="n">sub_dict</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">:</span> <span class="n">a</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;new_subs&quot;</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> new_subs(test, sub_dict)
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;smart_subs&quot;</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> smart_subs(test, sub_dict)
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using simplification, then normal subs&quot;</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> simplify(test).subs(sub_dict)
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Using trigsimp, then normal subs&quot;</span><span class="p">)</span>
<span class="o">%</span><span class="k">timeit</span> trigsimp(test).subs(sub_dict)
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>new_subs
1000 loops, best of 3: 222 s per loop
smart_subs
1000 loops, best of 3: 2.34 ms per loop
Using simplification, then normal subs
1 loops, best of 3: 1.11 s per loop
Using trigsimp, then normal subs
1 loops, best of 3: 815 ms per loop
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So there's considerable overhead, which was expected. Still, it's much faster than using simplify first, and then running <code>subs</code>.</p>
<p>The best use method would be to first try it with <code>new_subs</code>, and if you get a <code>nan</code> or <code>oo</code>, then try using <code>smart_subs</code>. To aid in this, we can write a nice wrapper function <code>msubs</code> that contains both methods:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">msubs</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">,</span> <span class="n">smart</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A custom subs for use on expressions derived in physics.mechanics.</span>

<span class="sd">    Traverses the expression tree once, performing the subs found in sub_dict.</span>
<span class="sd">    Terms inside `Derivative` expressions are ignored:</span>

<span class="sd">    &gt;&gt;&gt; x = dynamicsymbols(&#39;x&#39;)</span>
<span class="sd">    &gt;&gt;&gt; msubs(x.diff() + x, {x: 1})</span>
<span class="sd">    Derivative(x, t) + 1</span>

<span class="sd">    If smart=True, also checks for conditions that may result in `nan`, but</span>
<span class="sd">    if simplified would yield a valid expression. For example:</span>

<span class="sd">    &gt;&gt;&gt; (sin(a)/tan(a)).subs(a, 0)</span>
<span class="sd">    nan</span>
<span class="sd">    &gt;&gt;&gt; msubs(sin(a)/tan(a), {a: 0}, smart=True)</span>
<span class="sd">    1</span>

<span class="sd">    It does this by first replacing all `tan` with `sin/cos`. Then each node</span>
<span class="sd">    is traversed. If the node is a fraction, subs is first evaluated on the</span>
<span class="sd">    denominator. If this results in 0, simplification of the entire fraction</span>
<span class="sd">    is attempted. Using this selective simplification, only subexpressions</span>
<span class="sd">    that result in 1/0 are targeted, resulting in faster performance.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">smart</span><span class="p">:</span>
        <span class="n">func</span> <span class="o">=</span> <span class="n">smart_subs</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">func</span> <span class="o">=</span> <span class="n">new_subs</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">Matrix</span><span class="p">):</span>
        <span class="c1"># For matrices, func is applied to each element using `applyfunc`</span>
        <span class="k">return</span> <span class="n">expr</span><span class="o">.</span><span class="n">applyfunc</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">expr</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#Check that the results are the same:</span>
<span class="n">msubs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span> <span class="o">==</span> <span class="n">new_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
<span class="n">msubs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">,</span> <span class="n">smart</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">==</span> <span class="n">smart_subs</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">sub_dict</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[25]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This code has been included in my optimization branch, and is performing admirably against all the included tests (so much speed up!!!). The big test though is the bicycle example.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-Big-Test">The Big Test<a class="anchor-link" href="#The-Big-Test">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To really put this new code to the test I applied it to the <a href="http://docs.sympy.org/dev/modules/physics/mechanics/bicycle_example.html">bicycle example</a>, which has operation counts ranging from 400,000 to several million depending on which expression you're working with. How did it fair? Mixed results...</p>
<p>Using <code>msubs</code> with <code>smart=False</code> in the formation of the linearizer object resulted in a huge speed increase. Previously using <code>_subs_keep_derivs</code> there resulted in a run time of several hours. Now it runs in 14 seconds!</p>
<p>The second test is in the application of the operating point to the M, A, and B matrices. Previously evaluating these had resulted in <code>nan</code> and <code>oo</code>, and with operation counts exceeding 400,000 for M pre-simplification is out of the question. I tried using <code>msubs</code> with <code>smart=True</code> on this M, and let it run for 6 hours. It ended up consuming 98% of my RAM (4 GB worth), and it still wasn't done :( So for reasonable sized expressions the smart_subs we've implemented is acceptable, but it still doesn't work for the huge expressions. I'll have to keep working on optimizations to make this faster/reduce the initial expression size.</p>
<p>Still, all is not lost. Going from formulation to M, A, and B without the operating point substitution now only takes 20 minutes - down from the several hours before. This is actually faster than the previous linearize method, but unforunately results in expressions that evaluate to <code>nan</code>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Future-Work">Future Work<a class="anchor-link" href="#Future-Work">&#182;</a></h2><p>Per my <a href="https://github.com/pydy/pydy/wiki/GSoC-2014-Application:-Jim-Crist-%28Linearization-Routines-for-Equations-of-Motion%29#timeline">original timeline</a> I was supposed to be working on "pre-linearization" routines for generating the equations of motion directly in linearized form. I think this will be dropped in favor of cleaning up and speeding up the existing codebase. There's some dead code that needs removing, and I have some other ideas for speed-ups that I'd like to try.</p>
<p>After that, I hope to get to the original part 3 of the project, which is adding support for matrices to the code-generation code. Not sure if this would live in sympy or pydy, but it would be extremely useful to myself and others. For now I plan on taking it week-by-week.</p>
<hr>
<p><em>If you have thoughts on how to deal with the <code>nan</code> and <code>oo</code> issue, please let me know in the comments. Thanks!</em></p>

</div>
</div>
</div>
 


<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        " linebreaks: { automatic: true, width: '95% container' }, " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
    </section>

    <footer>
        <p>
            All content copyright 2014-2020 Jim Crist-Harif unless otherwise noted.
            Licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/">Creative Commons</a>.
        </p>
        <p>
        Find me on
        <a href="https://twitter.com/jcristharif">Twitter</a>,
        <a href="https://github.com/jcrist">GitHub</a>, or shoot me an
        <a href="mailto:jcristharif@gmail.com">email</a>.
        </p>
    </footer>
</body>
</html>